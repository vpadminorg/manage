import{ac as $,d as K,r as s,a0 as V,Q as ce,$ as pe,b as ue,a1 as _e,o as b,c as fe,j as e,k as l,w as u,x as N,e as t,t as S,Z as I,y as k,Y as O,a2 as ve,m as C,R as Y,T as ge,G as he,I as be,a3 as we,aq as ye,W as Ee,v as De,N as Ve}from"./index-SwfHvmsR.js";import{_ as Ne}from"./index-CwtlzU0C.js";import{E as Se,a as ke}from"./el-table-column-DvXjLevZ.js";import"./el-checkbox-gjRiKN0S.js";/* empty css               */import{_ as Ce}from"./index-D6KF0Zrv.js";/* empty css               *//* empty css                */import{E as Re,a as Te}from"./el-form-item-BTGfmHo9.js";import{E as Fe}from"./el-date-picker-CnLWeVPa.js";import{E as Ue}from"./index-BMMvtxBL.js";import{E as Pe}from"./index-Cu3lnjet.js";import{E as qe}from"./index-gXvdNh_C.js";import"./_initCloneObject-DuYGRlJO.js";/* empty css                */import"./index-Bqsyo0rw.js";import"./_baseClone-D_rg-wPN.js";import"./index-CWevaQ9i.js";const xe=_=>$({url:"/vpadmin/orders/list",method:"get",params:_}),Be=_=>$({url:`/vpadmin/orders/detail/${_}`,method:"get"}),Ie={class:"p-2"},Oe={class:"mb-[10px]"},Ye={class:"json-content"},$e=K({name:"Orders"}),Ke=K({...$e,setup(_){const{proxy:i}=ge(),R=s([]);s(!1);const w=s(!0),f=s(!0),Q=s([]),z=s(!0),A=s(!0),y=s(0),m=s(["",""]),T=s(),L=s(),v=V({visible:!1,title:"订单详情"}),E=s(""),M=ce(()=>{try{return JSON.stringify(JSON.parse(E.value),null,2)}catch{return E.value}}),j=async n=>{try{const a=await Be(n.id);a.data&&a.data.rawData?(E.value=a.data.rawData,v.visible=!0):i==null||i.$modal.msgError("获取订单详情失败")}catch(a){console.error("Error fetching order details:",a),i==null||i.$modal.msgError("获取订单详情时发生错误")}},F=V({visible:!1,title:""}),U={},H=V({form:{...U},queryParams:{pageNum:1,pageSize:10,id:void 0,orderNo:void 0,email:void 0,params:{timestamp:void 0}},rules:{}}),{queryParams:r,form:J,rules:Qe}=pe(H),g=async()=>{w.value=!0,r.value.params={},i==null||i.addDateRange(r.value,m.value,"Timestamp");const n=await xe(r.value);R.value=n.rows,y.value=n.total,w.value=!1},G=()=>{var n;J.value={...U},(n=L.value)==null||n.resetFields()},c=()=>{r.value.pageNum=1,g()},W=()=>{var n;m.value=["",""],(n=T.value)==null||n.resetFields(),c()},Z=n=>{Q.value=n.map(a=>a.id),z.value=n.length!=1,A.value=!n.length},X=()=>{G(),F.visible=!0,F.title="添加订单"};return ue(()=>{g()}),(n,a)=>{var x,B;const D=he,p=Re,ee=Fe,h=be,ae=Te,P=Ue,te=Pe,le=Ce,oe=qe,d=Se,ne=we,re=ke,se=Ne,ie=ye,de=Ee,q=_e("hasPermi"),me=De;return b(),fe("div",Ie,[e(ve,{"enter-active-class":(x=t(i))==null?void 0:x.animate.searchAnimate.enter,"leave-active-class":(B=t(i))==null?void 0:B.animate.searchAnimate.leave},{default:l(()=>[u(N("div",Oe,[e(P,{shadow:"hover"},{default:l(()=>[e(ae,{ref_key:"queryFormRef",ref:T,model:t(r),inline:!0},{default:l(()=>[e(p,{label:"主键",prop:"id"},{default:l(()=>[e(D,{modelValue:t(r).id,"onUpdate:modelValue":a[0]||(a[0]=o=>t(r).id=o),placeholder:"请输入主键",clearable:"",onKeyup:S(c,["enter"])},null,8,["modelValue"])]),_:1}),e(p,{label:"订单编号",prop:"orderNo"},{default:l(()=>[e(D,{modelValue:t(r).orderNo,"onUpdate:modelValue":a[1]||(a[1]=o=>t(r).orderNo=o),placeholder:"请输入订单编号",clearable:"",onKeyup:S(c,["enter"])},null,8,["modelValue"])]),_:1}),e(p,{label:"订单创建时间",style:{width:"308px"}},{default:l(()=>[e(ee,{modelValue:t(m),"onUpdate:modelValue":a[2]||(a[2]=o=>I(m)?m.value=o:null),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":[new Date(2e3,1,1,0,0,0),new Date(2e3,1,1,23,59,59)]},null,8,["modelValue","default-time"])]),_:1}),e(p,{label:"客户邮箱",prop:"email"},{default:l(()=>[e(D,{modelValue:t(r).email,"onUpdate:modelValue":a[3]||(a[3]=o=>t(r).email=o),placeholder:"请输入客户邮箱",clearable:"",onKeyup:S(c,["enter"])},null,8,["modelValue"])]),_:1}),e(p,null,{default:l(()=>[e(h,{type:"primary",icon:"Search",onClick:c},{default:l(()=>[k("搜索")]),_:1}),e(h,{icon:"Refresh",onClick:W},{default:l(()=>[k("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})],512),[[O,t(f)]])]),_:1},8,["enter-active-class","leave-active-class"]),e(P,{shadow:"never"},{header:l(()=>[e(oe,{gutter:10,class:"mb8"},{default:l(()=>[e(te,{span:1.5},{default:l(()=>[u((b(),C(h,{type:"primary",plain:"",icon:"Plus",onClick:X},{default:l(()=>[k("新增")]),_:1})),[[q,["vpadmin:orders:add"]]])]),_:1}),e(le,{showSearch:t(f),"onUpdate:showSearch":a[4]||(a[4]=o=>I(f)?f.value=o:null),onQueryTable:g},null,8,["showSearch"])]),_:1})]),default:l(()=>[u((b(),C(re,{data:t(R),onSelectionChange:Z},{default:l(()=>[e(d,{type:"selection",width:"55",align:"center"}),(b(),C(d,{key:0,label:"主键",align:"center",prop:"id"})),e(d,{label:"订单编号",align:"center",prop:"orderNo"}),e(d,{label:"订单创建时间",align:"center",prop:"timestamp",width:"180"},{default:l(o=>[N("span",null,Y(n.parseTime(o.row.timestamp)),1)]),_:1}),e(d,{label:"订单附加消息",align:"center",prop:"message"}),e(d,{label:"订单金额",align:"center",prop:"amount"}),e(d,{label:"客户邮箱",align:"center",prop:"email"}),e(d,{label:"货币类型",align:"center",prop:"currency"}),e(d,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:l(o=>[e(ne,{content:"详情",placement:"top"},{default:l(()=>[u(e(h,{link:"",type:"primary",icon:"Document",onClick:ze=>j(o.row)},null,8,["onClick"]),[[q,["vpadmin:orders:query"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[me,t(w)]]),u(e(se,{page:t(r).pageNum,"onUpdate:page":a[5]||(a[5]=o=>t(r).pageNum=o),limit:t(r).pageSize,"onUpdate:limit":a[6]||(a[6]=o=>t(r).pageSize=o),total:t(y),onPagination:g},null,8,["page","limit","total"]),[[O,t(y)>0]])]),_:1}),e(de,{modelValue:t(v).visible,"onUpdate:modelValue":a[7]||(a[7]=o=>t(v).visible=o),title:t(v).title,width:"50%"},{default:l(()=>[e(ie,{height:"400px"},{default:l(()=>[N("pre",Ye,Y(t(M)),1)]),_:1})]),_:1},8,["modelValue","title"])])}}}),ia=Ve(Ke,[["__scopeId","data-v-c9b37809"]]);export{ia as default};
