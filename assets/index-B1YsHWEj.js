import{ac as b,d as Y,r as p,a0 as O,$ as se,b as ue,a1 as ce,o as S,c as me,j as e,k as l,w as f,x as G,e as o,t as pe,y as _,Y as fe,a2 as _e,m as M,Z as ve,T as ge,G as he,I as be,a3 as Ie,W as ye,v as we}from"./index-_v2uieGc.js";/* empty css                */import"./el-checkbox-C6h3hzMD.js";import{E as ke}from"./el-tree-select-lk2_rJZl.js";import{E as Ee,a as Ve}from"./el-table-column-Q2QHI77F.js";/* empty css               */import{_ as Ce}from"./index-Bi2yoGwv.js";/* empty css               *//* empty css                */import{E as Te,a as Ne}from"./el-form-item-BZcdB44L.js";import{E as Re}from"./index-ctcZQfix.js";import{E as Fe}from"./index-7OoO_SlU.js";import{E as Se}from"./index-DJNwvRpE.js";import"./index-BFoUAo4m.js";import"./_initCloneObject-DMl0_0C4.js";import"./_baseClone-Cj6s47u0.js";const W=i=>b({url:"/demo/tree/list",method:"get",params:i}),qe=i=>b({url:"/demo/tree/"+i,method:"get"}),Ue=i=>b({url:"/demo/tree",method:"post",data:i}),$e=i=>b({url:"/demo/tree",method:"put",data:i}),xe=i=>b({url:"/demo/tree/"+i,method:"delete"}),Ae={class:"p-2"},De={class:"mb-[10px]"},Pe={class:"dialog-footer"},Be=Y({name:"Tree"}),lt=Y({...Be,setup(i){const{proxy:n}=ge(),V=p([]),C=p([]),I=p(!1),y=p(!0),w=p(!0),v=p(!1),q=p(),T=p(),U=p(),s=O({visible:!1,title:""}),$={id:void 0,parentId:void 0,deptId:void 0,userId:void 0,treeName:void 0},Z=O({form:{...$},queryParams:{parentId:void 0,deptId:void 0,userId:void 0,treeName:void 0},rules:{id:[{required:!0,message:"主键不能为空",trigger:"blur"}],parentId:[{required:!0,message:"父id不能为空",trigger:"blur"}],deptId:[{required:!0,message:"部门id不能为空",trigger:"blur"}],userId:[{required:!0,message:"用户id不能为空",trigger:"blur"}],treeName:[{required:!0,message:"值不能为空",trigger:"blur"}]}}),{queryParams:k,form:d,rules:z}=se(Z),g=async()=>{v.value=!0;const a=await W(k.value),t=n==null?void 0:n.handleTree(a.data,"id","parentId");t&&(V.value=t,v.value=!1)},x=async()=>{const a=await W();C.value=[];const t={id:0,treeName:"顶级节点",children:[]};t.children=n==null?void 0:n.handleTree(a.data,"id","parentId"),C.value.push(t)},H=()=>{N(),s.visible=!1},N=()=>{var a;d.value={...$},(a=T.value)==null||a.resetFields()},R=()=>{g()},J=()=>{var a;(a=q.value)==null||a.resetFields(),R()},A=a=>{N(),x(),a&&a.id?d.value.parentId=a.id:d.value.parentId=0,s.visible=!0,s.title="添加测试树"},X=()=>{w.value=!w.value,D(V.value,w.value)},D=(a,t)=>{a.forEach(u=>{var c;(c=U.value)==null||c.toggleRowExpansion(u,t),u.children&&u.children.length>0&&D(u.children,t)})},ee=async a=>{N(),await x(),a&&(d.value.parentId=a.id);const t=await qe(a.id);Object.assign(d.value,t.data),s.visible=!0,s.title="修改测试树"},te=()=>{var a;(a=T.value)==null||a.validate(async t=>{t&&(I.value=!0,d.value.id?await $e(d.value).finally(()=>I.value=!1):await Ue(d.value).finally(()=>I.value=!1),n==null||n.$modal.msgSuccess("操作成功"),s.visible=!1,await g())})},le=async a=>{await(n==null?void 0:n.$modal.confirm('是否确认删除测试树编号为"'+a.id+'"的数据项？')),v.value=!0,await xe(a.id).finally(()=>v.value=!1),await g(),n==null||n.$modal.msgSuccess("删除成功")};return ue(()=>{g()}),(a,t)=>{var Q,j;const u=he,c=Te,m=be,P=Ne,B=Re,L=Fe,ae=Ce,oe=Se,h=Ee,F=Ie,re=Ve,ne=ke,de=ye,E=ce("hasPermi"),ie=we;return S(),me("div",Ae,[e(_e,{"enter-active-class":(Q=o(n))==null?void 0:Q.animate.searchAnimate.enter,"leave-active-class":(j=o(n))==null?void 0:j.animate.searchAnimate.leave},{default:l(()=>[f(G("div",De,[e(B,{shadow:"hover"},{default:l(()=>[e(P,{ref_key:"queryFormRef",ref:q,model:o(k),inline:!0},{default:l(()=>[e(c,{label:"树节点名",prop:"treeName"},{default:l(()=>[e(u,{modelValue:o(k).treeName,"onUpdate:modelValue":t[0]||(t[0]=r=>o(k).treeName=r),placeholder:"请输入树节点名",clearable:"",onKeyup:pe(R,["enter"])},null,8,["modelValue"])]),_:1}),e(c,null,{default:l(()=>[e(m,{type:"primary",icon:"Search",onClick:R},{default:l(()=>[_("搜索")]),_:1}),e(m,{icon:"Refresh",onClick:J},{default:l(()=>[_("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})],512),[[fe,o(y)]])]),_:1},8,["enter-active-class","leave-active-class"]),e(B,{shadow:"hover"},{header:l(()=>[e(oe,{gutter:10,class:"mb8"},{default:l(()=>[e(L,{span:1.5},{default:l(()=>[f((S(),M(m,{type:"primary",plain:"",icon:"Plus",onClick:t[1]||(t[1]=r=>A())},{default:l(()=>[_("新增")]),_:1})),[[E,["demo:tree:add"]]])]),_:1}),e(L,{span:1.5},{default:l(()=>[e(m,{type:"info",plain:"",icon:"Sort",onClick:X},{default:l(()=>[_("展开/折叠")]),_:1})]),_:1}),e(ae,{showSearch:o(y),"onUpdate:showSearch":t[2]||(t[2]=r=>ve(y)?y.value=r:null),onQueryTable:g},null,8,["showSearch"])]),_:1})]),default:l(()=>[f((S(),M(re,{ref_key:"treeTableRef",ref:U,data:o(V),"row-key":"id","default-expand-all":o(w),"tree-props":{children:"children",hasChildren:"hasChildren"}},{default:l(()=>[e(h,{label:"父id",align:"center",prop:"parentId"}),e(h,{label:"部门id",align:"center",prop:"deptId"}),e(h,{label:"用户id",align:"center",prop:"userId"}),e(h,{label:"树节点名",align:"center",prop:"treeName"}),e(h,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:l(r=>[e(F,{content:"修改",placement:"top"},{default:l(()=>[f(e(m,{link:"",type:"primary",icon:"Edit",onClick:K=>ee(r.row)},null,8,["onClick"]),[[E,["demo:tree:edit"]]])]),_:2},1024),e(F,{content:"新增",placement:"top"},{default:l(()=>[f(e(m,{link:"",type:"primary",icon:"Plus",onClick:K=>A(r.row)},null,8,["onClick"]),[[E,["demo:tree:add"]]])]),_:2},1024),e(F,{content:"删除",placement:"top"},{default:l(()=>[f(e(m,{link:"",type:"primary",icon:"Delete",onClick:K=>le(r.row)},null,8,["onClick"]),[[E,["demo:tree:remove"]]])]),_:2},1024)]),_:1})]),_:1},8,["data","default-expand-all"])),[[ie,o(v)]])]),_:1}),e(de,{modelValue:o(s).visible,"onUpdate:modelValue":t[7]||(t[7]=r=>o(s).visible=r),title:o(s).title,width:"500px","append-to-body":""},{footer:l(()=>[G("div",Pe,[e(m,{loading:o(I),type:"primary",onClick:te},{default:l(()=>[_("确 定")]),_:1},8,["loading"]),e(m,{onClick:H},{default:l(()=>[_("取 消")]),_:1})])]),default:l(()=>[e(P,{ref_key:"treeFormRef",ref:T,model:o(d),rules:o(z),"label-width":"80px"},{default:l(()=>[e(c,{label:"父id",prop:"parentId"},{default:l(()=>[e(ne,{modelValue:o(d).parentId,"onUpdate:modelValue":t[3]||(t[3]=r=>o(d).parentId=r),data:o(C),props:{value:"id",label:"treeName",children:"children"},"value-key":"id",placeholder:"请选择父id","check-strictly":""},null,8,["modelValue","data"])]),_:1}),e(c,{label:"部门id",prop:"deptId"},{default:l(()=>[e(u,{modelValue:o(d).deptId,"onUpdate:modelValue":t[4]||(t[4]=r=>o(d).deptId=r),placeholder:"请输入部门id"},null,8,["modelValue"])]),_:1}),e(c,{label:"用户id",prop:"userId"},{default:l(()=>[e(u,{modelValue:o(d).userId,"onUpdate:modelValue":t[5]||(t[5]=r=>o(d).userId=r),placeholder:"请输入用户id"},null,8,["modelValue"])]),_:1}),e(c,{label:"值",prop:"treeName"},{default:l(()=>[e(u,{modelValue:o(d).treeName,"onUpdate:modelValue":t[6]||(t[6]=r=>o(d).treeName=r),placeholder:"请输入值"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});export{lt as default};
