import{d as C,Y as $,r as p,b as U,$ as q,o as N,c as x,m as g,j as e,k as n,e as o,x as k,y as E,w,p as P,Q as S,W as Q,R as j,K as G,G as M,I as O,a1 as W,v as Y}from"./index-DDAliqzK.js";import{_ as A}from"./index-RdVOGMqm.js";import{E as H,a as J}from"./el-table-column-DxCuKUMo.js";import"./el-checkbox-BucE91Wb.js";import{_ as X}from"./index-cbmq-Xhe.js";/* empty css                */import{E as Z,a as ee}from"./el-form-item-Dtm-Ic1o.js";import{l as oe,f as te}from"./index-jR5pkbqZ.js";import{E as le}from"./index-x58AzXEe.js";import"./_initCloneObject-B4dgLBrf.js";import"./_baseClone-1ZiivbqZ.js";const ae={class:"p-2"},ne={class:"mb-[10px]"},re=C({name:"Online"}),ye=C({...re,setup(se){const{proxy:i}=j(),{sys_device_type:V}=$(i==null?void 0:i.useDict("sys_device_type")),v=p([]),m=p(!0),d=p(0),b=p(),t=p({pageNum:1,pageSize:10,ipaddr:"",userName:""}),c=async()=>{m.value=!0;const s=await oe(t.value);v.value=s.rows,d.value=s.total,m.value=!1},u=()=>{t.value.pageNum=1,c()},T=()=>{var s;(s=b.value)==null||s.resetFields(),u()},L=async s=>{const[a]=await G(i==null?void 0:i.$modal.confirm('是否确认强退名称为"'+s.userName+'"的用户?'));a||(await te(s.tokenId),await c(),i==null||i.$modal.msgSuccess("删除成功"))};return U(()=>{c()}),(s,a)=>{const y=M,_=Z,f=O,z=ee,h=le,r=H,F=X,I=W,B=J,D=A,K=q("hasPermi"),R=Y;return N(),x("div",ae,[g("div",ne,[e(h,{shadow:"hover"},{default:n(()=>[e(z,{ref_key:"queryFormRef",ref:b,model:o(t),inline:!0},{default:n(()=>[e(_,{label:"登录地址",prop:"ipaddr"},{default:n(()=>[e(y,{modelValue:o(t).ipaddr,"onUpdate:modelValue":a[0]||(a[0]=l=>o(t).ipaddr=l),placeholder:"请输入登录地址",clearable:"",onKeyup:k(u,["enter"])},null,8,["modelValue"])]),_:1}),e(_,{label:"用户名称",prop:"userName"},{default:n(()=>[e(y,{modelValue:o(t).userName,"onUpdate:modelValue":a[1]||(a[1]=l=>o(t).userName=l),placeholder:"请输入用户名称",clearable:"",onKeyup:k(u,["enter"])},null,8,["modelValue"])]),_:1}),e(_,null,{default:n(()=>[e(f,{type:"primary",icon:"Search",onClick:u},{default:n(()=>a[4]||(a[4]=[E("搜索")])),_:1}),e(f,{icon:"Refresh",onClick:T},{default:n(()=>a[5]||(a[5]=[E("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),e(h,{shadow:"hover"},{default:n(()=>[w((N(),P(B,{data:o(v).slice((o(t).pageNum-1)*o(t).pageSize,o(t).pageNum*o(t).pageSize),style:{width:"100%"}},{default:n(()=>[e(r,{label:"序号",width:"50",type:"index",align:"center"},{default:n(l=>[g("span",null,S((o(t).pageNum-1)*o(t).pageSize+l.$index+1),1)]),_:1}),e(r,{label:"会话编号",align:"center",prop:"tokenId","show-overflow-tooltip":!0}),e(r,{label:"登录名称",align:"center",prop:"userName","show-overflow-tooltip":!0}),e(r,{label:"客户端",align:"center",prop:"clientKey","show-overflow-tooltip":!0}),e(r,{label:"设备类型",align:"center"},{default:n(l=>[e(F,{options:o(V),value:l.row.deviceType},null,8,["options","value"])]),_:1}),e(r,{label:"所属部门",align:"center",prop:"deptName","show-overflow-tooltip":!0}),e(r,{label:"主机",align:"center",prop:"ipaddr","show-overflow-tooltip":!0}),e(r,{label:"登录地点",align:"center",prop:"loginLocation","show-overflow-tooltip":!0}),e(r,{label:"操作系统",align:"center",prop:"os","show-overflow-tooltip":!0}),e(r,{label:"浏览器",align:"center",prop:"browser","show-overflow-tooltip":!0}),e(r,{label:"登录时间",align:"center",prop:"loginTime",width:"180"},{default:n(l=>[g("span",null,S(s.parseTime(l.row.loginTime)),1)]),_:1}),e(r,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:n(l=>[e(I,{content:"强退",placement:"top"},{default:n(()=>[w(e(f,{link:"",type:"primary",icon:"Delete",onClick:ie=>L(l.row)},null,8,["onClick"]),[[K,["monitor:online:forceLogout"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[R,o(m)]]),w(e(D,{page:o(t).pageNum,"onUpdate:page":a[2]||(a[2]=l=>o(t).pageNum=l),limit:o(t).pageSize,"onUpdate:limit":a[3]||(a[3]=l=>o(t).pageSize=l),total:o(d)},null,8,["page","limit","total"]),[[Q,o(d)>0]])]),_:1})])}}});export{ye as default};
