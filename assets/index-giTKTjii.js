import{d as X,$ as Q,r as m,a0 as x,b as he,a1 as ke,o as d,c as U,j as e,k as a,w as p,x as K,e as o,t as G,F as H,p as O,m as y,Z as W,y as f,Y as Z,a2 as Ce,q as Ee,R as J,T as Te,ai as De,aj as Ne,ak as Se,al as Re,am as Ue,an as Ke,G as Fe,C as Ie,D as $e,I as qe,a3 as Be,W as Pe,v as Ye}from"./index-SwfHvmsR.js";/* empty css                       *//* empty css                 */import{_ as Le}from"./index-CwtlzU0C.js";import{E as je,a as ze}from"./el-table-column-DvXjLevZ.js";import"./el-checkbox-gjRiKN0S.js";import{_ as Ae}from"./index-YuVMnXy9.js";/* empty css               */import{_ as Me}from"./index-D6KF0Zrv.js";/* empty css               *//* empty css                */import{E as Qe,a as xe}from"./el-form-item-BTGfmHo9.js";import{E as Ge}from"./el-date-picker-CnLWeVPa.js";import{E as He}from"./index-BMMvtxBL.js";import{E as Oe}from"./index-Cu3lnjet.js";import{E as We}from"./index-gXvdNh_C.js";import{E as Ze,a as Je}from"./index-gGP__DGH.js";import"./_initCloneObject-DuYGRlJO.js";/* empty css                */import"./index-Bqsyo0rw.js";import"./_baseClone-D_rg-wPN.js";import"./index-CWevaQ9i.js";const Xe={class:"p-2"},el={class:"mb-[10px]"},ll={class:"dialog-footer"},al=X({name:"Config"}),Tl=X({...al,setup(ol){const{proxy:i}=Te(),{sys_yes_no:E}=Q(i==null?void 0:i.useDict("sys_yes_no")),F=m([]),T=m(!0),k=m(!0),D=m([]),I=m(!0),$=m(!0),N=m(0),V=m(["",""]),q=m(),S=m(),g=x({visible:!1,title:""}),B={configId:void 0,configName:"",configKey:"",configValue:"",configType:"Y",remark:""},ee=x({form:{...B},queryParams:{pageNum:1,pageSize:10,configName:"",configKey:"",configType:""},rules:{configName:[{required:!0,message:"参数名称不能为空",trigger:"blur"}],configKey:[{required:!0,message:"参数键名不能为空",trigger:"blur"}],configValue:[{required:!0,message:"参数键值不能为空",trigger:"blur"}]}}),{queryParams:r,form:s,rules:le}=Q(ee),w=async()=>{T.value=!0;const n=await De(i==null?void 0:i.addDateRange(r.value,V.value));F.value=n.rows,N.value=n.total,T.value=!1},ae=()=>{R(),g.visible=!1},R=()=>{var n;s.value={...B},(n=S.value)==null||n.resetFields()},C=()=>{r.value.pageNum=1,w()},oe=()=>{var n;V.value=["",""],(n=q.value)==null||n.resetFields(),C()},te=n=>{D.value=n.map(t=>t.configId),I.value=n.length!=1,$.value=!n.length},ne=()=>{R(),g.visible=!0,g.title="添加参数"},P=async n=>{R();const t=(n==null?void 0:n.configId)||D.value[0],_=await Ne(t);Object.assign(s.value,_.data),g.visible=!0,g.title="修改参数"},ie=()=>{var n;(n=S.value)==null||n.validate(async t=>{t&&(s.value.configId?await Se(s.value):await Re(s.value),i==null||i.$modal.msgSuccess("操作成功"),g.visible=!1,await w())})},Y=async n=>{const t=(n==null?void 0:n.configId)||D.value;await(i==null?void 0:i.$modal.confirm('是否确认删除参数编号为"'+t+'"的数据项？')),await Ue(t),await w(),i==null||i.$modal.msgSuccess("删除成功")},se=()=>{i==null||i.download("system/config/export",{...r.value},`config_${new Date().getTime()}.xlsx`)},re=async()=>{await Ke(),i==null||i.$modal.msgSuccess("刷新缓存成功")};return he(()=>{w()}),(n,t)=>{var A,M;const _=Fe,c=Qe,ue=Ie,de=$e,ce=Ge,u=qe,L=xe,j=He,h=Oe,me=Me,pe=We,v=je,fe=Ae,z=Be,ge=ze,_e=Le,ve=Ze,ye=Je,be=Pe,b=ke("hasPermi"),we=Ye;return d(),U("div",Xe,[e(Ce,{"enter-active-class":(A=o(i))==null?void 0:A.animate.searchAnimate.enter,"leave-active-class":(M=o(i))==null?void 0:M.animate.searchAnimate.leave},{default:a(()=>[p(K("div",el,[e(j,{shadow:"hover"},{default:a(()=>[e(L,{ref_key:"queryFormRef",ref:q,model:o(r),inline:!0},{default:a(()=>[e(c,{label:"参数名称",prop:"configName"},{default:a(()=>[e(_,{modelValue:o(r).configName,"onUpdate:modelValue":t[0]||(t[0]=l=>o(r).configName=l),placeholder:"请输入参数名称",clearable:"",onKeyup:G(C,["enter"])},null,8,["modelValue"])]),_:1}),e(c,{label:"参数键名",prop:"configKey"},{default:a(()=>[e(_,{modelValue:o(r).configKey,"onUpdate:modelValue":t[1]||(t[1]=l=>o(r).configKey=l),placeholder:"请输入参数键名",clearable:"",onKeyup:G(C,["enter"])},null,8,["modelValue"])]),_:1}),e(c,{label:"系统内置",prop:"configType"},{default:a(()=>[e(de,{modelValue:o(r).configType,"onUpdate:modelValue":t[2]||(t[2]=l=>o(r).configType=l),placeholder:"系统内置",clearable:""},{default:a(()=>[(d(!0),U(H,null,O(o(E),l=>(d(),y(ue,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"创建时间",style:{width:"308px"}},{default:a(()=>[e(ce,{modelValue:o(V),"onUpdate:modelValue":t[3]||(t[3]=l=>W(V)?V.value=l:null),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":[new Date(2e3,1,1,0,0,0),new Date(2e3,1,1,23,59,59)]},null,8,["modelValue","default-time"])]),_:1}),e(c,null,{default:a(()=>[e(u,{type:"primary",icon:"Search",onClick:C},{default:a(()=>[f("搜索")]),_:1}),e(u,{icon:"Refresh",onClick:oe},{default:a(()=>[f("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})],512),[[Z,o(k)]])]),_:1},8,["enter-active-class","leave-active-class"]),e(j,{shadow:"hover"},{header:a(()=>[e(pe,{gutter:10,class:"mb8"},{default:a(()=>[e(h,{span:1.5},{default:a(()=>[p((d(),y(u,{type:"primary",plain:"",icon:"Plus",onClick:ne},{default:a(()=>[f("新增")]),_:1})),[[b,["system:config:add"]]])]),_:1}),e(h,{span:1.5},{default:a(()=>[p((d(),y(u,{type:"success",plain:"",icon:"Edit",disabled:o(I),onClick:t[4]||(t[4]=l=>P())},{default:a(()=>[f(" 修改 ")]),_:1},8,["disabled"])),[[b,["system:config:edit"]]])]),_:1}),e(h,{span:1.5},{default:a(()=>[p((d(),y(u,{type:"danger",plain:"",icon:"Delete",disabled:o($),onClick:t[5]||(t[5]=l=>Y())},{default:a(()=>[f(" 删除 ")]),_:1},8,["disabled"])),[[b,["system:config:remove"]]])]),_:1}),e(h,{span:1.5},{default:a(()=>[p((d(),y(u,{type:"warning",plain:"",icon:"Download",onClick:se},{default:a(()=>[f("导出")]),_:1})),[[b,["system:config:export"]]])]),_:1}),e(h,{span:1.5},{default:a(()=>[p((d(),y(u,{type:"danger",plain:"",icon:"Refresh",onClick:re},{default:a(()=>[f("刷新缓存")]),_:1})),[[b,["system:config:remove"]]])]),_:1}),e(me,{showSearch:o(k),"onUpdate:showSearch":t[6]||(t[6]=l=>W(k)?k.value=l:null),onQueryTable:w},null,8,["showSearch"])]),_:1})]),default:a(()=>[p((d(),y(ge,{data:o(F),onSelectionChange:te},{default:a(()=>[e(v,{type:"selection",width:"55",align:"center"}),Ee("",!0),e(v,{label:"参数名称",align:"center",prop:"configName","show-overflow-tooltip":!0}),e(v,{label:"参数键名",align:"center",prop:"configKey","show-overflow-tooltip":!0}),e(v,{label:"参数键值",align:"center",prop:"configValue","show-overflow-tooltip":!0}),e(v,{label:"系统内置",align:"center",prop:"configType"},{default:a(l=>[e(fe,{options:o(E),value:l.row.configType},null,8,["options","value"])]),_:1}),e(v,{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":!0}),e(v,{label:"创建时间",align:"center",prop:"createTime",width:"180"},{default:a(l=>[K("span",null,J(n.parseTime(l.row.createTime)),1)]),_:1}),e(v,{label:"操作",align:"center",width:"150","class-name":"small-padding fixed-width"},{default:a(l=>[e(z,{content:"修改",placement:"top"},{default:a(()=>[p(e(u,{link:"",type:"primary",icon:"Edit",onClick:Ve=>P(l.row)},null,8,["onClick"]),[[b,["system:config:edit"]]])]),_:2},1024),e(z,{content:"删除",placement:"top"},{default:a(()=>[p(e(u,{link:"",type:"primary",icon:"Delete",onClick:Ve=>Y(l.row)},null,8,["onClick"]),[[b,["system:config:remove"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[we,o(T)]]),p(e(_e,{page:o(r).pageNum,"onUpdate:page":t[7]||(t[7]=l=>o(r).pageNum=l),limit:o(r).pageSize,"onUpdate:limit":t[8]||(t[8]=l=>o(r).pageSize=l),total:o(N),onPagination:w},null,8,["page","limit","total"]),[[Z,o(N)>0]])]),_:1}),e(be,{modelValue:o(g).visible,"onUpdate:modelValue":t[14]||(t[14]=l=>o(g).visible=l),title:o(g).title,width:"500px","append-to-body":""},{footer:a(()=>[K("div",ll,[e(u,{type:"primary",onClick:ie},{default:a(()=>[f("确 定")]),_:1}),e(u,{onClick:ae},{default:a(()=>[f("取 消")]),_:1})])]),default:a(()=>[e(L,{ref_key:"configFormRef",ref:S,model:o(s),rules:o(le),"label-width":"80px"},{default:a(()=>[e(c,{label:"参数名称",prop:"configName"},{default:a(()=>[e(_,{modelValue:o(s).configName,"onUpdate:modelValue":t[9]||(t[9]=l=>o(s).configName=l),placeholder:"请输入参数名称"},null,8,["modelValue"])]),_:1}),e(c,{label:"参数键名",prop:"configKey"},{default:a(()=>[e(_,{modelValue:o(s).configKey,"onUpdate:modelValue":t[10]||(t[10]=l=>o(s).configKey=l),placeholder:"请输入参数键名"},null,8,["modelValue"])]),_:1}),e(c,{label:"参数键值",prop:"configValue"},{default:a(()=>[e(_,{modelValue:o(s).configValue,"onUpdate:modelValue":t[11]||(t[11]=l=>o(s).configValue=l),placeholder:"请输入参数键值"},null,8,["modelValue"])]),_:1}),e(c,{label:"系统内置",prop:"configType"},{default:a(()=>[e(ye,{modelValue:o(s).configType,"onUpdate:modelValue":t[12]||(t[12]=l=>o(s).configType=l)},{default:a(()=>[(d(!0),U(H,null,O(o(E),l=>(d(),y(ve,{key:l.value,value:l.value},{default:a(()=>[f(J(l.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"备注",prop:"remark"},{default:a(()=>[e(_,{modelValue:o(s).remark,"onUpdate:modelValue":t[13]||(t[13]=l=>o(s).remark=l),type:"textarea",placeholder:"请输入内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});export{Tl as default};
