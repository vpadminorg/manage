import{d as F,u as R,r as p,o as g,m as N,k as t,j as e,e as f,Z as q,c as G,F as S,p as O,x as h,R as k,y as x,G as Q,C as H,D as K,I as M,T as W}from"./index-_v2uieGc.js";/* empty css                */import{a as z}from"./el-form-item-BZcdB44L.js";import{E as J,a as Z}from"./el-tab-pane-D0PtCMTx.js";import{E as A,a as X}from"./el-table-column-Q2QHI77F.js";import{E as Y}from"./el-checkbox-C6h3hzMD.js";import{g as ee,u as le}from"./index-CgTG5ZZl.js";import{o as ae}from"./index-BRn2NTZM.js";import{_ as oe}from"./basicInfoForm.vue_vue_type_script_setup_true_lang-CyVH1ex5.js";import{_ as te}from"./genInfoForm.vue_vue_type_script_setup_true_lang-B2fhOtsL.js";import{E as ne}from"./index-ctcZQfix.js";import"./_baseClone-Cj6s47u0.js";import"./_initCloneObject-DMl0_0C4.js";/* empty css               *//* empty css               */import"./index-7OoO_SlU.js";import"./index-DJNwvRpE.js";/* empty css                 *//* empty css                */import"./el-tree-select-lk2_rJZl.js";import"./index-BFoUAo4m.js";import"./index-Dto-h3OW.js";import"./index-BAqBBdde.js";const ue={style:{float:"left"}},me={style:{float:"right",color:"#8492a6","font-size":"13px"}},de={style:{"text-align":"center","margin-left":"-100px","margin-top":"10px"}},re=F({name:"GenEdit"}),Le=F({...re,setup(ie){const v=R(),{proxy:r}=W(),V=p("columnInfo"),B=p(document.documentElement.scrollHeight-245+"px"),E=p([]),w=p([]),y=p([]),s=p({}),T=p(),U=p(),D=()=>{var d,n;const i=(d=T.value)==null?void 0:d.$refs.basicInfoForm,u=(n=U.value)==null?void 0:n.$refs.genInfoForm;Promise.all([i,u].map(L)).then(async b=>{var c;if(b.every(m=>!!m)){const m=Object.assign({},s.value);m.columns=w.value,m.params={treeCode:(c=s.value)==null?void 0:c.treeCode,treeName:s.value.treeName,treeParentCode:s.value.treeParentCode,parentMenuId:s.value.parentMenuId};const _=await le(m);r==null||r.$modal.msgSuccess(_.msg),_.code===200&&I()}else r==null||r.$modal.msgError("表单校验未通过，请重新检查提交内容")})},L=i=>new Promise(u=>{i.validate(d=>{u(d)})}),I=()=>{const i={path:"/tool/gen",fullPath:"",hash:"",matched:[],meta:void 0,name:void 0,params:void 0,redirectedFrom:void 0,query:{t:Date.now().toString(),pageNum:v.query.pageNum}};r==null||r.$tab.closeOpenPage(i)};return(async()=>{const i=v.params&&v.params.tableId;if(i){const u=await ee(i);w.value=u.data.rows,s.value=u.data.info,E.value=u.data.tables;const d=await ae();y.value=d.data}})(),(i,u)=>{const d=J,n=A,b=Q,o=H,c=K,m=Y,_=X,$=Z,C=M,j=z,P=ne;return g(),N(P,null,{default:t(()=>[e($,{modelValue:f(V),"onUpdate:modelValue":u[0]||(u[0]=l=>q(V)?V.value=l:null)},{default:t(()=>[e(d,{label:"基本信息",name:"basic"},{default:t(()=>[e(oe,{ref_key:"basicInfo",ref:T,info:f(s)},null,8,["info"])]),_:1}),e(d,{label:"字段信息",name:"columnInfo"},{default:t(()=>[e(_,{ref:"dragTable",data:f(w),"row-key":"columnId","max-height":f(B)},{default:t(()=>[e(n,{label:"序号",type:"index","min-width":"5%"}),e(n,{label:"字段列名",prop:"columnName","min-width":"10%","show-overflow-tooltip":!0}),e(n,{label:"字段描述","min-width":"10%"},{default:t(l=>[e(b,{modelValue:l.row.columnComment,"onUpdate:modelValue":a=>l.row.columnComment=a},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(n,{label:"物理类型",prop:"columnType","min-width":"10%","show-overflow-tooltip":!0}),e(n,{label:"Java类型","min-width":"11%"},{default:t(l=>[e(c,{modelValue:l.row.javaType,"onUpdate:modelValue":a=>l.row.javaType=a},{default:t(()=>[e(o,{label:"Long",value:"Long"}),e(o,{label:"String",value:"String"}),e(o,{label:"Integer",value:"Integer"}),e(o,{label:"Double",value:"Double"}),e(o,{label:"BigDecimal",value:"BigDecimal"}),e(o,{label:"Date",value:"Date"}),e(o,{label:"Boolean",value:"Boolean"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(n,{label:"java属性","min-width":"10%"},{default:t(l=>[e(b,{modelValue:l.row.javaField,"onUpdate:modelValue":a=>l.row.javaField=a},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(n,{label:"插入","min-width":"5%"},{default:t(l=>[e(m,{modelValue:l.row.isInsert,"onUpdate:modelValue":a=>l.row.isInsert=a,"true-value":"1","false-value":"0"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(n,{label:"编辑","min-width":"5%"},{default:t(l=>[e(m,{modelValue:l.row.isEdit,"onUpdate:modelValue":a=>l.row.isEdit=a,"true-value":"1","false-value":"0"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(n,{label:"列表","min-width":"5%"},{default:t(l=>[e(m,{modelValue:l.row.isList,"onUpdate:modelValue":a=>l.row.isList=a,"true-value":"1","false-value":"0"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(n,{label:"查询","min-width":"5%"},{default:t(l=>[e(m,{modelValue:l.row.isQuery,"onUpdate:modelValue":a=>l.row.isQuery=a,"true-value":"1","false-value":"0"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(n,{label:"查询方式","min-width":"10%"},{default:t(l=>[e(c,{modelValue:l.row.queryType,"onUpdate:modelValue":a=>l.row.queryType=a},{default:t(()=>[e(o,{label:"=",value:"EQ"}),e(o,{label:"!=",value:"NE"}),e(o,{label:">",value:"GT"}),e(o,{label:">=",value:"GE"}),e(o,{label:"<",value:"LT"}),e(o,{label:"<=",value:"LE"}),e(o,{label:"LIKE",value:"LIKE"}),e(o,{label:"BETWEEN",value:"BETWEEN"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(n,{label:"必填","min-width":"5%"},{default:t(l=>[e(m,{modelValue:l.row.isRequired,"onUpdate:modelValue":a=>l.row.isRequired=a,"true-value":"1","false-value":"0"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(n,{label:"显示类型","min-width":"12%"},{default:t(l=>[e(c,{modelValue:l.row.htmlType,"onUpdate:modelValue":a=>l.row.htmlType=a},{default:t(()=>[e(o,{label:"文本框",value:"input"}),e(o,{label:"文本域",value:"textarea"}),e(o,{label:"下拉框",value:"select"}),e(o,{label:"单选框",value:"radio"}),e(o,{label:"复选框",value:"checkbox"}),e(o,{label:"日期控件",value:"datetime"}),e(o,{label:"图片上传",value:"imageUpload"}),e(o,{label:"文件上传",value:"fileUpload"}),e(o,{label:"富文本控件",value:"editor"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(n,{label:"字典类型","min-width":"12%"},{default:t(l=>[e(c,{modelValue:l.row.dictType,"onUpdate:modelValue":a=>l.row.dictType=a,clearable:"",filterable:"",placeholder:"请选择"},{default:t(()=>[(g(!0),G(S,null,O(f(y),a=>(g(),N(o,{key:a.dictType,label:a.dictName,value:a.dictType},{default:t(()=>[h("span",ue,k(a.dictName),1),h("span",me,k(a.dictType),1)]),_:2},1032,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data","max-height"])]),_:1}),e(d,{label:"生成信息",name:"genInfo"},{default:t(()=>[e(te,{ref_key:"genInfo",ref:U,info:f(s),tables:f(E)},null,8,["info","tables"])]),_:1})]),_:1},8,["modelValue"]),e(j,{"label-width":"100px"},{default:t(()=>[h("div",de,[e(C,{type:"primary",onClick:u[1]||(u[1]=l=>D())},{default:t(()=>[x("提交")]),_:1}),e(C,{onClick:u[2]||(u[2]=l=>I())},{default:t(()=>[x("返回")]),_:1})])]),_:1})]),_:1})}}});export{Le as default};
