import{d as Q,ae as P,r as w,Q as S,i as W,b as Y,J as $,o as d,m as b,k as l,j as e,y as u,e as n,q as I,c as g,F as V,w as A,p as v,Y as H,x as U,C as X,D as Z,ah as ee,a3 as le,G as ae,I as te,cJ as ne,cK as oe,cL as ue,T as de}from"./index-SwfHvmsR.js";import{E as me,a as re}from"./el-form-item-BTGfmHo9.js";/* empty css               *//* empty css                 *//* empty css                */import"./el-checkbox-gjRiKN0S.js";import{E as se}from"./el-tree-select-BekMS_9a.js";/* empty css               */import{l as pe}from"./index-_C1nwlOk.js";import{E as fe}from"./index-Cu3lnjet.js";import{E as _e}from"./index-gGP__DGH.js";import{E as ie}from"./index-gXvdNh_C.js";const ce=U("i",{class:"el-icon-arrow-down el-icon--right"},null,-1),be=U("h4",{class:"form-header"},"其他信息",-1),ge=U("h4",{class:"form-header"},"关联信息",-1),qe=Q({__name:"genInfoForm",props:{info:P.any.isRequired,tables:P.any.isRequired},setup(N){const{proxy:k}=de(),F=w([]),q=w([]),E=N,o=S(()=>E.info),h=S(()=>E.tables),x=w({tplCategory:[{required:!0,message:"请选择生成模板",trigger:"blur"}],packageName:[{required:!0,message:"请输入生成包路径",trigger:"blur"}],moduleName:[{required:!0,message:"请输入生成模块名",trigger:"blur"}],businessName:[{required:!0,message:"请输入生成业务名",trigger:"blur"}],functionName:[{required:!0,message:"请输入生成功能名",trigger:"blur"}]}),B=()=>{o.value.subTableFkName=""},D=c=>{c!=="sub"&&(o.value.subTableName="",o.value.subTableFkName="")},R=c=>{h.value.forEach(t=>{const _=t.tableName;if(c===_){F.value=t.columns;return}})},j=async()=>{const c=await pe(),t=k==null?void 0:k.handleTree(c.data,"menuId");t&&(q.value=t)};return W(()=>E.info.subTableName,c=>{R(c)}),Y(()=>{j()}),(c,t)=>{const _=X,y=Z,m=me,r=fe,s=$("question-filled"),p=ee,f=le,C=ae,z=se,M=_e,J=te,L=ne,O=oe,G=ue,T=ie,K=re;return d(),b(K,{ref:"genInfoForm",model:n(o),rules:n(x),"label-width":"150px"},{default:l(()=>[e(T,null,{default:l(()=>[e(r,{span:12},{default:l(()=>[e(m,{prop:"tplCategory"},{label:l(()=>[u("生成模板")]),default:l(()=>[e(y,{modelValue:n(o).tplCategory,"onUpdate:modelValue":t[0]||(t[0]=a=>n(o).tplCategory=a),onChange:D},{default:l(()=>[e(_,{label:"单表（增删改查）",value:"crud"}),e(_,{label:"树表（增删改查）",value:"tree"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,{prop:"packageName"},{label:l(()=>[u(" 生成包路径 "),e(f,{content:"生成在哪个java包下，例如 com.ruoyi.system",placement:"top"},{default:l(()=>[e(p,null,{default:l(()=>[e(s)]),_:1})]),_:1})]),default:l(()=>[e(C,{modelValue:n(o).packageName,"onUpdate:modelValue":t[1]||(t[1]=a=>n(o).packageName=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,{prop:"moduleName"},{label:l(()=>[u(" 生成模块名 "),e(f,{content:"可理解为子系统名，例如 system",placement:"top"},{default:l(()=>[e(p,null,{default:l(()=>[e(s)]),_:1})]),_:1})]),default:l(()=>[e(C,{modelValue:n(o).moduleName,"onUpdate:modelValue":t[2]||(t[2]=a=>n(o).moduleName=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,{prop:"businessName"},{label:l(()=>[u(" 生成业务名 "),e(f,{content:"可理解为功能英文名，例如 user",placement:"top"},{default:l(()=>[e(p,null,{default:l(()=>[e(s)]),_:1})]),_:1})]),default:l(()=>[e(C,{modelValue:n(o).businessName,"onUpdate:modelValue":t[3]||(t[3]=a=>n(o).businessName=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,{prop:"functionName"},{label:l(()=>[u(" 生成功能名 "),e(f,{content:"用作类描述，例如 用户",placement:"top"},{default:l(()=>[e(p,null,{default:l(()=>[e(s)]),_:1})]),_:1})]),default:l(()=>[e(C,{modelValue:n(o).functionName,"onUpdate:modelValue":t[4]||(t[4]=a=>n(o).functionName=a)},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,null,{label:l(()=>[u(" 上级菜单 "),e(f,{content:"分配到指定菜单下，例如 系统管理",placement:"top"},{default:l(()=>[e(p,null,{default:l(()=>[e(s)]),_:1})]),_:1})]),default:l(()=>[e(z,{modelValue:n(o).parentMenuId,"onUpdate:modelValue":t[5]||(t[5]=a=>n(o).parentMenuId=a),data:n(q),props:{value:"menuId",label:"menuName",children:"children"},"value-key":"menuId","node-key":"menuId",placeholder:"选择上级菜单","check-strictly":"",filterable:"",clearable:"","highlight-current":""},null,8,["modelValue","data"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,{prop:"genType"},{label:l(()=>[u(" 生成代码方式 "),e(f,{content:"默认为zip压缩包下载，也可以自定义生成路径",placement:"top"},{default:l(()=>[e(p,null,{default:l(()=>[e(s)]),_:1})]),_:1})]),default:l(()=>[e(M,{modelValue:n(o).genType,"onUpdate:modelValue":t[6]||(t[6]=a=>n(o).genType=a),value:"0"},{default:l(()=>[u("zip压缩包")]),_:1},8,["modelValue"]),e(M,{modelValue:n(o).genType,"onUpdate:modelValue":t[7]||(t[7]=a=>n(o).genType=a),value:"1"},{default:l(()=>[u("自定义路径")]),_:1},8,["modelValue"])]),_:1})]),_:1}),n(o).genType=="1"?(d(),b(r,{key:0,span:24},{default:l(()=>[e(m,{prop:"genPath"},{label:l(()=>[u(" 自定义路径 "),e(f,{content:"填写磁盘绝对路径，若不填写，则生成到当前Web项目下",placement:"top"},{default:l(()=>[e(p,null,{default:l(()=>[e(s)]),_:1})]),_:1})]),default:l(()=>[e(C,{modelValue:n(o).genPath,"onUpdate:modelValue":t[9]||(t[9]=a=>n(o).genPath=a)},{append:l(()=>[e(G,null,{dropdown:l(()=>[e(O,null,{default:l(()=>[e(L,{onClick:t[8]||(t[8]=a=>n(o).genPath="/")},{default:l(()=>[u("恢复默认的生成基础路径")]),_:1})]),_:1})]),default:l(()=>[e(J,{type:"primary"},{default:l(()=>[u(" 最近路径快速选择 "),ce]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):I("",!0)]),_:1}),N.info.tplCategory=="tree"?(d(),g(V,{key:0},[be,A(e(T,null,{default:l(()=>[e(r,{span:12},{default:l(()=>[e(m,null,{label:l(()=>[u(" 树编码字段 "),e(f,{content:"树显示的编码字段名， 如：dept_id",placement:"top"},{default:l(()=>[e(p,null,{default:l(()=>[e(s)]),_:1})]),_:1})]),default:l(()=>[e(y,{modelValue:n(o).treeCode,"onUpdate:modelValue":t[10]||(t[10]=a=>n(o).treeCode=a),placeholder:"请选择"},{default:l(()=>[(d(!0),g(V,null,v(N.info.columns,(a,i)=>(d(),b(_,{key:i,label:a.columnName+"："+a.columnComment,value:a.columnName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,null,{label:l(()=>[u(" 树父编码字段 "),e(f,{content:"树显示的父编码字段名， 如：parent_Id",placement:"top"},{default:l(()=>[e(p,null,{default:l(()=>[e(s)]),_:1})]),_:1})]),default:l(()=>[e(y,{modelValue:n(o).treeParentCode,"onUpdate:modelValue":t[11]||(t[11]=a=>n(o).treeParentCode=a),placeholder:"请选择"},{default:l(()=>[(d(!0),g(V,null,v(n(o).columns,(a,i)=>(d(),b(_,{key:i,label:a.columnName+"："+a.columnComment,value:a.columnName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,null,{label:l(()=>[u(" 树名称字段 "),e(f,{content:"树节点的显示名称字段名， 如：dept_name",placement:"top"},{default:l(()=>[e(p,null,{default:l(()=>[e(s)]),_:1})]),_:1})]),default:l(()=>[e(y,{modelValue:n(o).treeName,"onUpdate:modelValue":t[12]||(t[12]=a=>n(o).treeName=a),placeholder:"请选择"},{default:l(()=>[(d(!0),g(V,null,v(N.info.columns,(a,i)=>(d(),b(_,{key:i,label:a.columnName+"："+a.columnComment,value:a.columnName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},512),[[H,N.info.tplCategory=="tree"]])],64)):I("",!0),N.info.tplCategory=="sub"?(d(),g(V,{key:1},[ge,e(T,null,{default:l(()=>[e(r,{span:12},{default:l(()=>[e(m,null,{label:l(()=>[u(" 关联子表的表名 "),e(f,{content:"关联子表的表名， 如：sys_user",placement:"top"},{default:l(()=>[e(p,null,{default:l(()=>[e(s)]),_:1})]),_:1})]),default:l(()=>[e(y,{modelValue:n(o).subTableName,"onUpdate:modelValue":t[13]||(t[13]=a=>n(o).subTableName=a),placeholder:"请选择",onChange:B},{default:l(()=>[(d(!0),g(V,null,v(n(h),(a,i)=>(d(),b(_,{key:i,label:a.tableName+"："+a.tableComment,value:a.tableName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(r,{span:12},{default:l(()=>[e(m,null,{label:l(()=>[u(" 子表关联的外键名 "),e(f,{content:"子表关联的外键名， 如：user_id",placement:"top"},{default:l(()=>[e(p,null,{default:l(()=>[e(s)]),_:1})]),_:1})]),default:l(()=>[e(y,{modelValue:n(o).subTableFkName,"onUpdate:modelValue":t[14]||(t[14]=a=>n(o).subTableFkName=a),placeholder:"请选择"},{default:l(()=>[(d(!0),g(V,null,v(n(F),(a,i)=>(d(),b(_,{key:i,label:a.columnName+"："+a.columnComment,value:a.columnName},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})],64)):I("",!0)]),_:1},8,["model","rules"])}}});export{qe as _};
