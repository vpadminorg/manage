import{aa as E,d as g,r as b,b as O,J as v,o as a,c as o,j as d,k as c,m as e,e as t,Q as i,t as n,y as z,R as B}from"./index-DDAliqzK.js";/* empty css               *//* empty css               *//* empty css                */import{i as y}from"./index-QK8Dm0L8.js";import{E as F}from"./index-x58AzXEe.js";import{E as I}from"./index-CokWeuRK.js";import{E as N}from"./index-D7RFStbC.js";function R(){return E({url:"/monitor/cache",method:"get"})}const S={class:"p-2"},V={class:"el-table el-table--enable-row-hover el-table--medium"},D={style:{width:"100%"}},L={class:"el-table__cell is-leaf"},M={key:0,class:"cell"},P={class:"el-table__cell is-leaf"},T={key:0,class:"cell"},$={class:"el-table__cell is-leaf"},j={key:0,class:"cell"},A={class:"el-table__cell is-leaf"},J={key:0,class:"cell"},K={class:"el-table__cell is-leaf"},Q={key:0,class:"cell"},U={class:"el-table__cell is-leaf"},q={key:0,class:"cell"},G={class:"el-table__cell is-leaf"},H={key:0,class:"cell"},W={class:"el-table__cell is-leaf"},X={key:0,class:"cell"},Y={class:"el-table__cell is-leaf"},Z={key:0,class:"cell"},ee={class:"el-table__cell is-leaf"},le={key:0,class:"cell"},se={class:"el-table__cell is-leaf"},te={key:0,class:"cell"},ae={class:"el-table__cell is-leaf"},oe={key:0,class:"cell"},ie={class:"el-table el-table--enable-row-hover el-table--medium"},ne={class:"el-table el-table--enable-row-hover el-table--medium"},de=g({name:"Cache"}),he=g({...de,setup(ce){const s=b({}),p=b(),h=b(),{proxy:_}=B(),k=async()=>{_==null||_.$modal.loading("正在加载缓存监控数据，请稍候！");const m=await R();_==null||_.$modal.closeLoading(),s.value=m.data;const l=y(p.value,"macarons");l.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:"命令",type:"pie",roseType:"radius",radius:[15,95],center:["50%","38%"],data:m.data.commandStats,animationEasing:"cubicInOut",animationDuration:1e3}]});const r=y(h.value,"macarons");r.setOption({tooltip:{formatter:"{b} <br/>{a} : "+s.value.info.used_memory_human},series:[{name:"峰值",type:"gauge",min:0,max:1e3,detail:{formatter:s.value.info.used_memory_human},data:[{value:parseFloat(s.value.info.used_memory_human),name:"内存消耗"}]}]}),window.addEventListener("resize",()=>{l.resize(),r.resize()})};return O(()=>{k()}),(m,l)=>{const r=v("Monitor"),f=F,u=I,w=v("PieChart"),C=v("Odometer"),x=N;return a(),o("div",S,[d(x,null,{default:c(()=>[d(u,{span:24,class:"card-box"},{default:c(()=>[d(f,{shadow:"hover"},{header:c(()=>[d(r,{style:{width:"1em",height:"1em","vertical-align":"middle"}}),l[0]||(l[0]=e("span",{style:{"vertical-align":"middle"}},"基本信息",-1))]),default:c(()=>[e("div",V,[e("table",D,[e("tbody",null,[e("tr",null,[l[1]||(l[1]=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"Redis版本")],-1)),e("td",L,[t(s).info?(a(),o("div",M,i(t(s).info.redis_version),1)):n("",!0)]),l[2]||(l[2]=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"运行模式")],-1)),e("td",P,[t(s).info?(a(),o("div",T,i(t(s).info.redis_mode==="standalone"?"单机":"集群"),1)):n("",!0)]),l[3]||(l[3]=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"端口")],-1)),e("td",$,[t(s).info?(a(),o("div",j,i(t(s).info.tcp_port),1)):n("",!0)]),l[4]||(l[4]=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"客户端数")],-1)),e("td",A,[t(s).info?(a(),o("div",J,i(t(s).info.connected_clients),1)):n("",!0)])]),e("tr",null,[l[5]||(l[5]=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"运行时间(天)")],-1)),e("td",K,[t(s).info?(a(),o("div",Q,i(t(s).info.uptime_in_days),1)):n("",!0)]),l[6]||(l[6]=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"使用内存")],-1)),e("td",U,[t(s).info?(a(),o("div",q,i(t(s).info.used_memory_human),1)):n("",!0)]),l[7]||(l[7]=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"使用CPU")],-1)),e("td",G,[t(s).info?(a(),o("div",H,i(parseFloat(t(s).info.used_cpu_user_children).toFixed(2)),1)):n("",!0)]),l[8]||(l[8]=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"内存配置")],-1)),e("td",W,[t(s).info?(a(),o("div",X,i(t(s).info.maxmemory_human),1)):n("",!0)])]),e("tr",null,[l[9]||(l[9]=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"AOF是否开启")],-1)),e("td",Y,[t(s).info?(a(),o("div",Z,i(t(s).info.aof_enabled==="0"?"否":"是"),1)):n("",!0)]),l[10]||(l[10]=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"RDB是否成功")],-1)),e("td",ee,[t(s).info?(a(),o("div",le,i(t(s).info.rdb_last_bgsave_status),1)):n("",!0)]),l[11]||(l[11]=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"Key数量")],-1)),e("td",se,[t(s).dbSize?(a(),o("div",te,i(t(s).dbSize),1)):n("",!0)]),l[12]||(l[12]=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"网络入口/出口")],-1)),e("td",ae,[t(s).info?(a(),o("div",oe,i(t(s).info.instantaneous_input_kbps)+"kps/"+i(t(s).info.instantaneous_output_kbps)+"kps ",1)):n("",!0)])])])])])]),_:1})]),_:1}),d(u,{span:12,class:"card-box"},{default:c(()=>[d(f,{shadow:"hover"},{header:c(()=>[d(w,{style:{width:"1em",height:"1em","vertical-align":"middle"}}),l[13]||(l[13]=e("span",{style:{"vertical-align":"middle"}},"命令统计",-1))]),default:c(()=>[e("div",ie,[e("div",{ref_key:"commandstats",ref:p,style:{height:"420px"}},null,512)])]),_:1})]),_:1}),d(u,{span:12,class:"card-box"},{default:c(()=>[d(f,{shadow:"hover"},{header:c(()=>[d(C,{style:{width:"1em",height:"1em","vertical-align":"middle"}}),l[14]||(l[14]=z()),l[15]||(l[15]=e("span",{style:{"vertical-align":"middle"}},"内存信息",-1))]),default:c(()=>[e("div",ne,[e("div",{ref_key:"usedmemory",ref:h,style:{height:"420px"}},null,512)])]),_:1})]),_:1})]),_:1})])}}});export{he as default};
