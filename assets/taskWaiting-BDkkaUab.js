import{d as O,Y as X,r,b as Z,o as d,c as R,j as e,k as a,w as f,m as x,e as n,x as h,y as c,W as V,a0 as $,X as H,p as E,Q as g,F as ee,q as te,R as oe,Z as ne,G as ae,I as le,a9 as se,v as ie}from"./index-D4nD6lq3.js";import{_ as re}from"./index-BH-aX6uU.js";import{E as pe,a as ue}from"./el-table-column-Nw9CsZCh.js";import"./el-checkbox-DpS0yAA0.js";import{_ as me}from"./index-Cu5tDpmP.js";/* empty css               */import{_ as de}from"./index-CeC1FWzw.js";/* empty css                */import{E as ce,a as _e}from"./el-form-item-oceQVxPu.js";import{p as fe}from"./index-B-G_MFQm.js";import{w as ge}from"./index-BWlz0r_B.js";import{E as ve}from"./index-DWSlLEJi.js";import{E as we}from"./index-fvT2sidt.js";import"./_initCloneObject-Cyh6om-O.js";/* empty css                */import"./index-CsUbaV0a.js";import"./_baseClone-zQQn4kcl.js";const ye={class:"p-2"},be={class:"mb-[10px]"},Le=O({__name:"taskWaiting",setup(he){const{proxy:u}=oe(),{wf_business_status:B}=X(u==null?void 0:u.useDict("wf_business_status")),k=r(),v=r(!0),U=r([]),z=r(!0),I=r(!0),m=r(!0),w=r(0),N=r([]),s=r({pageNum:1,pageSize:10,name:void 0,processDefinitionName:void 0,processDefinitionKey:void 0});Z(()=>{C()});const p=()=>{C()},q=()=>{var l;(l=k.value)==null||l.resetFields(),s.value.pageNum=1,s.value.pageSize=10,p()},L=l=>{U.value=l.map(o=>o.id),z.value=l.length!==1,I.value=!l.length},C=()=>{v.value=!0,fe(s.value).then(l=>{N.value=l.rows,w.value=l.total,v.value=!1})},Q=async l=>{const o=ne({wfDefinitionConfigVo:l.wfDefinitionConfigVo,wfNodeConfigVo:l.wfNodeConfigVo,businessKey:l.businessKey,taskId:l.id,type:"approval"});ge.routerJump(o,u)};return(l,o)=>{var S,T;const y=ae,_=ce,b=le,W=_e,D=ve,Y=de,P=we,i=pe,K=se,A=me,J=ue,j=re,G=ie;return d(),R("div",ye,[e($,{"enter-active-class":(S=n(u))==null?void 0:S.animate.searchAnimate.enter,"leave-active-class":(T=n(u))==null?void 0:T.animate.searchAnimate.leave},{default:a(()=>[f(x("div",be,[e(D,{shadow:"hover"},{default:a(()=>[f(e(W,{ref_key:"queryFormRef",ref:k,model:n(s),inline:!0},{default:a(()=>[e(_,{label:"任务名称",prop:"name"},{default:a(()=>[e(y,{modelValue:n(s).name,"onUpdate:modelValue":o[0]||(o[0]=t=>n(s).name=t),placeholder:"请输入任务名称",onKeyup:h(p,["enter"])},null,8,["modelValue"])]),_:1}),e(_,{label:"流程定义名称","label-width":"100",prop:"processDefinitionName"},{default:a(()=>[e(y,{modelValue:n(s).processDefinitionName,"onUpdate:modelValue":o[1]||(o[1]=t=>n(s).processDefinitionName=t),placeholder:"请输入流程定义名称",onKeyup:h(p,["enter"])},null,8,["modelValue"])]),_:1}),e(_,{label:"流程定义KEY","label-width":"100",prop:"processDefinitionKey"},{default:a(()=>[e(y,{modelValue:n(s).processDefinitionKey,"onUpdate:modelValue":o[2]||(o[2]=t=>n(s).processDefinitionKey=t),placeholder:"请输入流程定义KEY",onKeyup:h(p,["enter"])},null,8,["modelValue"])]),_:1}),e(_,null,{default:a(()=>[e(b,{type:"primary",icon:"Search",onClick:p},{default:a(()=>o[6]||(o[6]=[c("搜索")])),_:1}),e(b,{icon:"Refresh",onClick:q},{default:a(()=>o[7]||(o[7]=[c("重置")])),_:1})]),_:1})]),_:1},8,["model"]),[[V,n(m)]])]),_:1})],512),[[V,n(m)]])]),_:1},8,["enter-active-class","leave-active-class"]),e(D,{shadow:"hover"},{header:a(()=>[e(P,{gutter:10,class:"mb8"},{default:a(()=>[e(Y,{showSearch:n(m),"onUpdate:showSearch":o[3]||(o[3]=t=>H(m)?m.value=t:null),onQueryTable:p},null,8,["showSearch"])]),_:1})]),default:a(()=>[f((d(),E(J,{border:"",data:n(N),onSelectionChange:L},{default:a(()=>[e(i,{type:"selection",width:"55",align:"center"}),e(i,{align:"center",type:"index",label:"序号",width:"60"}),e(i,{"show-overflow-tooltip":!0,align:"center",label:"流程定义名称"},{default:a(t=>[x("span",null,g(t.row.processDefinitionName)+"v"+g(t.row.processDefinitionVersion)+".0",1)]),_:1}),e(i,{align:"center",prop:"processDefinitionKey",label:"流程定义KEY"}),e(i,{align:"center",prop:"name",label:"任务名称"}),e(i,{align:"center",prop:"assigneeName",label:"办理人"},{default:a(t=>[t.row.participantVo&&t.row.assignee===null?(d(!0),R(ee,{key:0},te(t.row.participantVo.candidateName,(F,M)=>(d(),E(K,{key:M,type:"success"},{default:a(()=>[c(g(F),1)]),_:2},1024))),128)):(d(),E(K,{key:1,type:"success"},{default:a(()=>[c(g(t.row.assigneeName||"无"),1)]),_:2},1024))]),_:1}),e(i,{align:"center",label:"流程状态","min-width":"70"},{default:a(t=>[e(A,{options:n(B),value:t.row.businessStatus},null,8,["options","value"])]),_:1}),e(i,{align:"center",prop:"createTime",label:"创建时间",width:"160"}),e(i,{label:"操作",align:"center",width:"200"},{default:a(t=>[e(b,{type:"primary",size:"small",icon:"Edit",onClick:F=>Q(t.row)},{default:a(()=>o[8]||(o[8]=[c("办理")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[G,n(v)]]),f(e(j,{page:n(s).pageNum,"onUpdate:page":o[4]||(o[4]=t=>n(s).pageNum=t),limit:n(s).pageSize,"onUpdate:limit":o[5]||(o[5]=t=>n(s).pageSize=t),total:n(w),onPagination:p},null,8,["page","limit","total"]),[[V,n(w)>0]])]),_:1})])}}});export{Le as default};
