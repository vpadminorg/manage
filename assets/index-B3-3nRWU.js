import{d as O,Y as z,r as d,Z as A,b as fe,$ as ce,o as u,c as j,j as a,k as l,w as f,m as G,e as o,x as _e,y as c,W as K,a0 as ge,p as _,X as ve,F as be,q as we,Q as ye,R as ke,G as Ve,I as Ee,a1 as Ce,U as Fe,v as Me}from"./index-DDAliqzK.js";/* empty css                       *//* empty css                 *//* empty css                */import{_ as Ne}from"./index-RdVOGMqm.js";import{E as Se,a as Te}from"./el-table-column-DxCuKUMo.js";import"./el-checkbox-BucE91Wb.js";import{_ as Ue}from"./index-cbmq-Xhe.js";/* empty css               */import{_ as De}from"./index-2eSzZeHe.js";/* empty css               */import{E as Re,a as $e}from"./el-form-item-Dtm-Ic1o.js";import{l as qe,g as he,u as Pe,a as xe,d as Be}from"./index-CbJbc-cH.js";import{E as Le}from"./index-CokWeuRK.js";import{E as Ie}from"./index-D7RFStbC.js";import{E as Qe}from"./index-x58AzXEe.js";import{E as ze,a as Ae}from"./index-BmCCDXTO.js";import"./_initCloneObject-B4dgLBrf.js";/* empty css                */import"./index-CSfZWYHi.js";import"./_baseClone-1ZiivbqZ.js";const je={class:"p-2"},Ge={class:"search"},Ke={class:"dialog-footer"},Oe=O({name:"FormManage"}),ga=O({...Oe,setup(We){const{proxy:s}=ke(),{wf_form_type:U}=z(s==null?void 0:s.useDict("wf_form_type")),D=d([]),k=d(!1),V=d(!0),E=d(!0),F=d([]),R=d(!0),$=d(!0),M=d(0),q=d(),N=d(),p=A({visible:!1,title:""}),h={id:void 0,formName:void 0,formType:"static",remark:void 0},W=A({form:{...h},queryParams:{pageNum:1,pageSize:10,formName:void 0,formType:void 0},rules:{id:[{required:!0,message:"主键不能为空",trigger:"blur"}],formName:[{required:!0,message:"表单名称不能为空",trigger:"blur"}],formType:[{required:!0,message:"表单类型不能为空",trigger:"change"}],router:[{required:!0,message:"不能为空",trigger:"blur"}]}}),{queryParams:m,form:r,rules:X}=z(W),b=async()=>{V.value=!0;const n=await qe(m.value);D.value=n.rows,M.value=n.total,V.value=!1},Y=()=>{S(),p.visible=!1},S=()=>{var n;r.value={...h},(n=N.value)==null||n.resetFields()},T=()=>{m.value.pageNum=1,b()},Z=()=>{var n;(n=q.value)==null||n.resetFields(),T()},H=n=>{F.value=n.map(e=>e.id),R.value=n.length!=1,$.value=!n.length},J=()=>{S(),p.visible=!0,p.title="添加表单管理"},P=async n=>{S();const e=(n==null?void 0:n.id)||F.value[0],g=await he(e);Object.assign(r.value,g.data),p.visible=!0,p.title="修改表单管理"},ee=()=>{var n;(n=N.value)==null||n.validate(async e=>{e&&(k.value=!0,r.value.id?await Pe(r.value).finally(()=>k.value=!1):await xe(r.value).finally(()=>k.value=!1),s==null||s.$modal.msgSuccess("操作成功"),p.visible=!1,await b())})},x=async n=>{const e=(n==null?void 0:n.id)||F.value;await(s==null?void 0:s.$modal.confirm('是否确认删除表单管理编号为"'+e+'"的数据项？').finally(()=>V.value=!1)),await Be(e),s==null||s.$modal.msgSuccess("删除成功"),await b()},ae=()=>{s==null||s.download("workflow/formManage/export",{...m.value},`formManage_${new Date().getTime()}.xlsx`)};return fe(()=>{b()}),(n,e)=>{var I,Q;const g=Ve,v=Re,i=Ee,B=$e,C=Le,oe=De,le=Ie,w=Se,te=Ue,L=Ce,ne=Te,re=Ne,se=Qe,ie=ze,me=Ae,de=Fe,y=ce("hasPermi"),ue=Me;return u(),j("div",je,[a(ge,{"enter-active-class":(I=o(s))==null?void 0:I.animate.searchAnimate.enter,"leave-active-class":(Q=o(s))==null?void 0:Q.animate.searchAnimate.leave},{default:l(()=>[f(G("div",Ge,[a(B,{ref_key:"queryFormRef",ref:q,model:o(m),inline:!0},{default:l(()=>[a(v,{label:"表单名称",prop:"formName"},{default:l(()=>[a(g,{modelValue:o(m).formName,"onUpdate:modelValue":e[0]||(e[0]=t=>o(m).formName=t),placeholder:"请输入表单名称",clearable:"",onKeyup:_e(T,["enter"])},null,8,["modelValue"])]),_:1}),a(v,null,{default:l(()=>[a(i,{type:"primary",icon:"Search",onClick:T},{default:l(()=>e[13]||(e[13]=[c("搜索")])),_:1}),a(i,{icon:"Refresh",onClick:Z},{default:l(()=>e[14]||(e[14]=[c("重置")])),_:1})]),_:1})]),_:1},8,["model"])],512),[[K,o(E)]])]),_:1},8,["enter-active-class","leave-active-class"]),a(se,{shadow:"never"},{header:l(()=>[a(le,{gutter:10,class:"mb8"},{default:l(()=>[a(C,{span:1.5},{default:l(()=>[f((u(),_(i,{type:"primary",plain:"",icon:"Plus",onClick:J},{default:l(()=>e[15]||(e[15]=[c("新增")])),_:1})),[[y,["workflow:formManage:add"]]])]),_:1}),a(C,{span:1.5},{default:l(()=>[f((u(),_(i,{type:"success",plain:"",icon:"Edit",disabled:o(R),onClick:e[1]||(e[1]=t=>P())},{default:l(()=>e[16]||(e[16]=[c("修改")])),_:1},8,["disabled"])),[[y,["workflow:formManage:edit"]]])]),_:1}),a(C,{span:1.5},{default:l(()=>[f((u(),_(i,{type:"danger",plain:"",icon:"Delete",disabled:o($),onClick:e[2]||(e[2]=t=>x())},{default:l(()=>e[17]||(e[17]=[c("删除")])),_:1},8,["disabled"])),[[y,["workflow:formManage:remove"]]])]),_:1}),a(C,{span:1.5},{default:l(()=>[f((u(),_(i,{type:"warning",plain:"",icon:"Download",onClick:ae},{default:l(()=>e[18]||(e[18]=[c("导出")])),_:1})),[[y,["workflow:formManage:export"]]])]),_:1}),a(oe,{showSearch:o(E),"onUpdate:showSearch":e[3]||(e[3]=t=>ve(E)?E.value=t:null),onQueryTable:b},null,8,["showSearch"])]),_:1})]),default:l(()=>[f((u(),_(ne,{data:o(D),onSelectionChange:H},{default:l(()=>[a(w,{type:"selection",width:"55",align:"center"}),a(w,{label:"表单名称",align:"center",prop:"formName"}),a(w,{label:"表单类型",align:"center"},{default:l(t=>[a(te,{options:o(U),value:t.row.formType},null,8,["options","value"])]),_:1}),a(w,{label:"地址",align:"center",prop:"router"}),a(w,{label:"备注",align:"center",prop:"remark"}),a(w,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:l(t=>[a(L,{content:"修改",placement:"top"},{default:l(()=>[f(a(i,{link:"",type:"primary",icon:"Edit",onClick:pe=>P(t.row)},null,8,["onClick"]),[[y,["workflow:formManage:edit"]]])]),_:2},1024),a(L,{content:"删除",placement:"top"},{default:l(()=>[f(a(i,{link:"",type:"primary",icon:"Delete",onClick:pe=>x(t.row)},null,8,["onClick"]),[[y,["workflow:formManage:remove"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[ue,o(V)]]),f(a(re,{page:o(m).pageNum,"onUpdate:page":e[4]||(e[4]=t=>o(m).pageNum=t),limit:o(m).pageSize,"onUpdate:limit":e[5]||(e[5]=t=>o(m).pageSize=t),total:o(M),onPagination:b},null,8,["page","limit","total"]),[[K,o(M)>0]])]),_:1}),a(de,{modelValue:o(p).visible,"onUpdate:modelValue":e[12]||(e[12]=t=>o(p).visible=t),title:o(p).title,width:"500px","append-to-body":""},{footer:l(()=>[G("div",Ke,[a(i,{loading:o(k),type:"primary",onClick:ee},{default:l(()=>e[19]||(e[19]=[c("确 定")])),_:1},8,["loading"]),a(i,{onClick:Y},{default:l(()=>e[20]||(e[20]=[c("取 消")])),_:1})])]),default:l(()=>[a(B,{ref_key:"formManageFormRef",ref:N,model:o(r),rules:o(X),"label-width":"80px"},{default:l(()=>[a(v,{label:"表单名称",prop:"formName"},{default:l(()=>[a(g,{modelValue:o(r).formName,"onUpdate:modelValue":e[6]||(e[6]=t=>o(r).formName=t),placeholder:"请输入表单名称"},null,8,["modelValue"])]),_:1}),a(v,{label:"表单类型",prop:"formType"},{default:l(()=>[a(me,{modelValue:o(r).formType,"onUpdate:modelValue":e[7]||(e[7]=t=>o(r).formType=t),onChange:e[8]||(e[8]=t=>o(r).router="")},{default:l(()=>[(u(!0),j(be,null,we(o(U),t=>(u(),_(ie,{key:t.value,border:"",value:t.value},{default:l(()=>[c(ye(t.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(r).formType==="static"?(u(),_(v,{key:0,label:"路由地址",prop:"router"},{default:l(()=>[a(g,{modelValue:o(r).router,"onUpdate:modelValue":e[9]||(e[9]=t=>o(r).router=t),placeholder:"请输入路由地址"},null,8,["modelValue"])]),_:1})):(u(),_(v,{key:1,label:"表单",prop:"router"},{default:l(()=>[a(g,{modelValue:o(r).router,"onUpdate:modelValue":e[10]||(e[10]=t=>o(r).router=t),disabled:"",placeholder:"请选择表单"},{append:l(()=>[a(i,{icon:"Search"})]),_:1},8,["modelValue"])]),_:1})),a(v,{label:"备注",prop:"remark"},{default:l(()=>[a(g,{modelValue:o(r).remark,"onUpdate:modelValue":e[11]||(e[11]=t=>o(r).remark=t),type:"textarea",placeholder:"请输入内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});export{ga as default};
