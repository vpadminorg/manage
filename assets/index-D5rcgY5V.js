import{aa as r,d as g,r as v,b as f,E as s,o as b,c as h,j as a,k as n,y as E,ab as S,I as w}from"./index-DDAliqzK.js";import{E as y,a as x}from"./el-form-item-Dtm-Ic1o.js";import"./_baseClone-1ZiivbqZ.js";import"./_initCloneObject-B4dgLBrf.js";const C=()=>r({url:"/vpadmin/globalSettings",method:"get"}),V=o=>r({url:"/vpadmin/globalSettings",method:"post",data:o}),k=o=>r({url:"/vpadmin/globalSettings",method:"put",data:o}),F={class:"p-2"},M=g({__name:"index",setup(o){const t=v({autoSendEmail:"0"});f(async()=>{try{const e=await C();e.data&&(t.value=e.data)}catch(e){console.error("Failed to fetch global settings:",e),s.error("获取全局设置失败")}});const d=e=>{console.log("Auto send email changed to:",e)},c=async()=>{try{t.value.id?await k(t.value):await V({...t.value}),s.success("设置保存成功")}catch(e){console.error("Failed to save settings:",e),s.error("设置保存失败")}};return(e,l)=>{const u=S,i=y,m=w,p=x;return b(),h("div",F,[a(p,{model:t.value,"label-width":"120px"},{default:n(()=>[a(i,{label:"自动发送邮件"},{default:n(()=>[a(u,{modelValue:t.value.autoSendEmail,"onUpdate:modelValue":l[0]||(l[0]=_=>t.value.autoSendEmail=_),"active-value":"1","inactive-value":"0",onChange:d},null,8,["modelValue"])]),_:1}),a(i,null,{default:n(()=>[a(m,{type:"primary",onClick:c},{default:n(()=>l[1]||(l[1]=[E("保存设置")])),_:1})]),_:1})]),_:1},8,["model"])])}}});export{M as default};
