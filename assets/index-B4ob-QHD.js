import{i as T}from"./index-QK8Dm0L8.js";import{d as F,r as c,O as N,S as C,b as q,n as P,T as $,o as A,c as L,m as i,j as l,k as r,F as K,q as Q,p as Y,e as s,Q as M,I as D,y as k,U as H,a as J,L as W}from"./index-D4nD6lq3.js";import{E as g}from"./index-DWSlLEJi.js";import{E as d}from"./index-I5OlcPyW.js";import{E as h}from"./index-fvT2sidt.js";const X={totalUsers:1234,totalOrders:5678,monthlyRevenue:98765.43,averageOrderAmount:123.45,userGrowth:{dates:Array.from({length:30},(v,n)=>{const e=new Date;return e.setDate(e.getDate()-n),e.toISOString().split("T")[0]}).reverse(),values:Array.from({length:30},(v,n)=>Math.floor(1e3+n*10+Math.random()*50))},orderTrend:{dates:Array.from({length:30},(v,n)=>{const e=new Date;return e.setDate(e.getDate()-n),e.toISOString().split("T")[0]}).reverse(),values:Array.from({length:30},()=>Math.floor(Math.random()*100+50))},revenueTrend:{dates:Array.from({length:30},(v,n)=>{const e=new Date;return e.setDate(e.getDate()-n),e.toISOString().split("T")[0]}).reverse(),values:Array.from({length:30},()=>Math.random()*1e4+5e3)}};function Z(v){return new Promise(n=>{setTimeout(()=>{n({data:X,status:200,statusText:"OK",headers:{},config:{}})},500)})}const ee="/assets/analytics-dashboard-D07O37Y9.png",te={class:"dashboard"},ae={class:"dashboard-content"},se={class:"card-header"},re={class:"card-content"},le=["src"],oe=F({__name:"index",setup(v){const n=J(),e=c({loading:!0,statistics:{}}),y=c(!1),x=c(!1),V=N(()=>{var a,t;return[{title:"总用户数",value:e.value.statistics.totalUsers||0},{title:"总订单数",value:e.value.statistics.totalOrders||0},{title:"本月收入",value:`¥${((a=e.value.statistics.monthlyRevenue)==null?void 0:a.toFixed(2))||"0.00"}`},{title:"平均订单金额",value:`¥${((t=e.value.statistics.averageOrderAmount)==null?void 0:t.toFixed(2))||"0.00"}`}]}),_=c(null),w=c(null),b=c(null),f=C(null),m=C(null),p=C(null),z=()=>{_.value&&!f.value&&(f.value=T(_.value)),w.value&&!m.value&&(m.value=T(w.value)),b.value&&!p.value&&(p.value=T(b.value))},B=()=>{var a,t,o,u,G,S;return{userGrowth:{title:{text:"用户增长趋势"},xAxis:{type:"category",data:(a=e.value.statistics.userGrowth)==null?void 0:a.dates},yAxis:{type:"value"},series:[{data:(t=e.value.statistics.userGrowth)==null?void 0:t.values,type:"line"}],grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},tooltip:{trigger:"axis"},responsive:!0,maintainAspectRatio:!1},orderTrend:{title:{text:"订单趋势"},xAxis:{type:"category",data:(o=e.value.statistics.orderTrend)==null?void 0:o.dates},yAxis:{type:"value"},series:[{data:(u=e.value.statistics.orderTrend)==null?void 0:u.values,type:"bar"}],grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},tooltip:{trigger:"axis"},responsive:!0,maintainAspectRatio:!1},revenueTrend:{title:{text:"收入趋势"},xAxis:{type:"category",data:(G=e.value.statistics.revenueTrend)==null?void 0:G.dates},yAxis:{type:"value"},series:[{data:(S=e.value.statistics.revenueTrend)==null?void 0:S.values,type:"line"}],grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},tooltip:{trigger:"axis"},responsive:!0,maintainAspectRatio:!1}}},O=()=>{var t,o,u;const a=B();(t=f.value)==null||t.setOption(a.userGrowth),(o=m.value)==null||o.setOption(a.orderTrend),(u=p.value)==null||u.setOption(a.revenueTrend)},R=()=>{var a,t,o;(a=f.value)==null||a.resize(),(t=m.value)==null||t.resize(),(o=p.value)==null||o.resize()},E=async()=>{try{e.value.loading=!0;const{data:a}=await Z();e.value.statistics=a}catch(a){console.error("Failed to fetch dashboard data:",a)}finally{e.value.loading=!1}},I=async()=>{y.value=!0;try{await E(),O()}finally{y.value=!1}},U=()=>{x.value=!0},j=()=>{n.push("/vpadmin/project/project")};return q(async()=>{await E(),await P(),z(),O(),window.addEventListener("resize",R)}),$(()=>{var a,t,o;window.removeEventListener("resize",R),(a=f.value)==null||a.dispose(),(t=m.value)==null||t.dispose(),(o=p.value)==null||o.dispose()}),(a,t)=>(A(),L("div",te,[i("div",ae,[l(s(h),{gutter:20},{default:r(()=>[(A(!0),L(K,null,Q(V.value,(o,u)=>(A(),Y(s(d),{key:u,xs:24,sm:12,md:6},{default:r(()=>[l(s(g),{class:"box-card"},{default:r(()=>[i("div",se,[i("span",null,M(o.title),1)]),i("div",re,[i("h2",null,M(o.value),1)])]),_:2},1024)]),_:2},1024))),128))]),_:1}),l(s(h),{gutter:20,style:{"margin-top":"20px"}},{default:r(()=>[l(s(d),{xs:24,sm:24,md:12},{default:r(()=>[l(s(g),null,{default:r(()=>[i("div",{ref_key:"userGrowthChartRef",ref:_,class:"chart-container"},null,512)]),_:1})]),_:1}),l(s(d),{xs:24,sm:24,md:12},{default:r(()=>[l(s(g),null,{default:r(()=>[i("div",{ref_key:"orderTrendChartRef",ref:w,class:"chart-container"},null,512)]),_:1})]),_:1})]),_:1}),l(s(h),{gutter:20,style:{"margin-top":"20px"}},{default:r(()=>[l(s(d),{span:24},{default:r(()=>[l(s(g),null,{default:r(()=>[i("div",{ref_key:"revenueChartRef",ref:b,class:"chart-container"},null,512)]),_:1})]),_:1})]),_:1}),l(s(h),{style:{"margin-top":"20px","justify-content":"center","align-items":"center"}},{default:r(()=>[l(s(d),{xs:24,sm:8,md:4,style:{"text-align":"center","margin-bottom":"10px"}},{default:r(()=>[l(s(D),{type:"primary",loading:y.value,onClick:I},{default:r(()=>t[1]||(t[1]=[k(" 刷新数据 ")])),_:1},8,["loading"])]),_:1}),l(s(d),{xs:24,sm:8,md:4,style:{"text-align":"center","margin-bottom":"10px"}},{default:r(()=>[l(s(D),{link:"",onClick:U},{default:r(()=>t[2]||(t[2]=[k("More analytics data preview")])),_:1})]),_:1}),l(s(d),{xs:24,sm:8,md:4,style:{"text-align":"center","margin-bottom":"10px"}},{default:r(()=>[l(s(D),{link:"",style:{color:"#f56c6c"},onClick:j},{default:r(()=>t[3]||(t[3]=[k("Go to upgrade your site")])),_:1})]),_:1})]),_:1})]),l(s(H),{modelValue:x.value,"onUpdate:modelValue":t[0]||(t[0]=o=>x.value=o),title:"Analytics Dashboard",width:"80%"},{default:r(()=>[i("img",{src:s(ee),style:{width:"100%"},alt:"Analytics Dashboard"},null,8,le)]),_:1},8,["modelValue"])]))}}),ve=W(oe,[["__scopeId","data-v-a75b25c1"]]);export{ve as default};
