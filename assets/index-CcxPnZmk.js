import{ac as E,d as g,r as u,b as O,J as b,o as t,c as a,j as i,k as n,x as e,e as l,R as o,q as c,y as z,T as B}from"./index-_v2uieGc.js";/* empty css               *//* empty css               *//* empty css                */import{i as y}from"./index-QK8Dm0L8.js";import{E as F}from"./index-ctcZQfix.js";import{E as I}from"./index-7OoO_SlU.js";import{E as N}from"./index-DJNwvRpE.js";function R(){return E({url:"/monitor/cache",method:"get"})}const S={class:"p-2"},V=e("span",{style:{"vertical-align":"middle"}},"基本信息",-1),D={class:"el-table el-table--enable-row-hover el-table--medium"},L={style:{width:"100%"}},M=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"Redis版本")],-1),P={class:"el-table__cell is-leaf"},T={key:0,class:"cell"},$=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"运行模式")],-1),j={class:"el-table__cell is-leaf"},q={key:0,class:"cell"},A=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"端口")],-1),J={class:"el-table__cell is-leaf"},K={key:0,class:"cell"},U=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"客户端数")],-1),G={class:"el-table__cell is-leaf"},H={key:0,class:"cell"},Q=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"运行时间(天)")],-1),W={class:"el-table__cell is-leaf"},X={key:0,class:"cell"},Y=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"使用内存")],-1),Z={class:"el-table__cell is-leaf"},ee={key:0,class:"cell"},se=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"使用CPU")],-1),le={class:"el-table__cell is-leaf"},te={key:0,class:"cell"},ae=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"内存配置")],-1),oe={class:"el-table__cell is-leaf"},ce={key:0,class:"cell"},ie=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"AOF是否开启")],-1),ne={class:"el-table__cell is-leaf"},_e={key:0,class:"cell"},de=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"RDB是否成功")],-1),re={class:"el-table__cell is-leaf"},me={key:0,class:"cell"},he=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"Key数量")],-1),fe={class:"el-table__cell is-leaf"},ue={key:0,class:"cell"},be=e("td",{class:"el-table__cell is-leaf"},[e("div",{class:"cell"},"网络入口/出口")],-1),ve={class:"el-table__cell is-leaf"},pe={key:0,class:"cell"},ye=e("span",{style:{"vertical-align":"middle"}},"命令统计",-1),ge={class:"el-table el-table--enable-row-hover el-table--medium"},ke=e("span",{style:{"vertical-align":"middle"}},"内存信息",-1),we={class:"el-table el-table--enable-row-hover el-table--medium"},Ce=g({name:"Cache"}),Se=g({...Ce,setup(xe){const s=u({}),v=u(),p=u(),{proxy:_}=B(),k=async()=>{_==null||_.$modal.loading("正在加载缓存监控数据，请稍候！");const r=await R();_==null||_.$modal.closeLoading(),s.value=r.data;const m=y(v.value,"macarons");m.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:"命令",type:"pie",roseType:"radius",radius:[15,95],center:["50%","38%"],data:r.data.commandStats,animationEasing:"cubicInOut",animationDuration:1e3}]});const d=y(p.value,"macarons");d.setOption({tooltip:{formatter:"{b} <br/>{a} : "+s.value.info.used_memory_human},series:[{name:"峰值",type:"gauge",min:0,max:1e3,detail:{formatter:s.value.info.used_memory_human},data:[{value:parseFloat(s.value.info.used_memory_human),name:"内存消耗"}]}]}),window.addEventListener("resize",()=>{m.resize(),d.resize()})};return O(()=>{k()}),(r,m)=>{const d=b("Monitor"),h=F,f=I,w=b("PieChart"),C=b("Odometer"),x=N;return t(),a("div",S,[i(x,null,{default:n(()=>[i(f,{span:24,class:"card-box"},{default:n(()=>[i(h,{shadow:"hover"},{header:n(()=>[i(d,{style:{width:"1em",height:"1em","vertical-align":"middle"}}),V]),default:n(()=>[e("div",D,[e("table",L,[e("tbody",null,[e("tr",null,[M,e("td",P,[l(s).info?(t(),a("div",T,o(l(s).info.redis_version),1)):c("",!0)]),$,e("td",j,[l(s).info?(t(),a("div",q,o(l(s).info.redis_mode==="standalone"?"单机":"集群"),1)):c("",!0)]),A,e("td",J,[l(s).info?(t(),a("div",K,o(l(s).info.tcp_port),1)):c("",!0)]),U,e("td",G,[l(s).info?(t(),a("div",H,o(l(s).info.connected_clients),1)):c("",!0)])]),e("tr",null,[Q,e("td",W,[l(s).info?(t(),a("div",X,o(l(s).info.uptime_in_days),1)):c("",!0)]),Y,e("td",Z,[l(s).info?(t(),a("div",ee,o(l(s).info.used_memory_human),1)):c("",!0)]),se,e("td",le,[l(s).info?(t(),a("div",te,o(parseFloat(l(s).info.used_cpu_user_children).toFixed(2)),1)):c("",!0)]),ae,e("td",oe,[l(s).info?(t(),a("div",ce,o(l(s).info.maxmemory_human),1)):c("",!0)])]),e("tr",null,[ie,e("td",ne,[l(s).info?(t(),a("div",_e,o(l(s).info.aof_enabled==="0"?"否":"是"),1)):c("",!0)]),de,e("td",re,[l(s).info?(t(),a("div",me,o(l(s).info.rdb_last_bgsave_status),1)):c("",!0)]),he,e("td",fe,[l(s).dbSize?(t(),a("div",ue,o(l(s).dbSize),1)):c("",!0)]),be,e("td",ve,[l(s).info?(t(),a("div",pe,o(l(s).info.instantaneous_input_kbps)+"kps/"+o(l(s).info.instantaneous_output_kbps)+"kps ",1)):c("",!0)])])])])])]),_:1})]),_:1}),i(f,{span:12,class:"card-box"},{default:n(()=>[i(h,{shadow:"hover"},{header:n(()=>[i(w,{style:{width:"1em",height:"1em","vertical-align":"middle"}}),ye]),default:n(()=>[e("div",ge,[e("div",{ref_key:"commandstats",ref:v,style:{height:"420px"}},null,512)])]),_:1})]),_:1}),i(f,{span:12,class:"card-box"},{default:n(()=>[i(h,{shadow:"hover"},{header:n(()=>[i(C,{style:{width:"1em",height:"1em","vertical-align":"middle"}}),z(),ke]),default:n(()=>[e("div",we,[e("div",{ref_key:"usedmemory",ref:p,style:{height:"420px"}},null,512)])]),_:1})]),_:1})]),_:1})])}}});export{Se as default};
