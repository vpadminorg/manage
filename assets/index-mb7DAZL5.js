import{aa as $,d as K,r as s,Z as V,O as pe,Y as ue,b as ce,$ as _e,o as h,c as fe,j as e,k as l,w as c,m as N,e as a,x as S,X as B,y as k,W as I,a0 as ve,p as C,Q as Y,R as ge,G as be,I as he,a1 as we,ao as ye,U as Ee,v as De,L as Ve}from"./index-D4nD6lq3.js";import{_ as Ne}from"./index-BH-aX6uU.js";import{E as Se,a as ke}from"./el-table-column-Nw9CsZCh.js";import"./el-checkbox-DpS0yAA0.js";/* empty css               */import{_ as Ce}from"./index-CeC1FWzw.js";/* empty css               *//* empty css                */import{E as Re,a as Te}from"./el-form-item-oceQVxPu.js";import{E as Ue}from"./el-date-picker-Bpr8CaQ-.js";import{E as Fe}from"./index-DWSlLEJi.js";import{E as Pe}from"./index-I5OlcPyW.js";import{E as Oe}from"./index-fvT2sidt.js";import"./_initCloneObject-Cyh6om-O.js";/* empty css                */import"./index-CsUbaV0a.js";import"./_baseClone-zQQn4kcl.js";import"./index-DfYNOEwA.js";const qe=_=>$({url:"/vpadmin/orders/list",method:"get",params:_}),xe=_=>$({url:`/vpadmin/orders/detail/${_}`,method:"get"}),Be={class:"p-2"},Ie={class:"mb-[10px]"},Ye={class:"json-content"},$e=K({name:"Orders"}),Ke=K({...$e,setup(_){const{proxy:i}=ge(),R=s([]);s(!1);const w=s(!0),f=s(!0),L=s([]),Q=s(!0),z=s(!0),y=s(0),m=s(["",""]),T=s(),A=s(),v=V({visible:!1,title:"订单详情"}),E=s(""),M=pe(()=>{try{return JSON.stringify(JSON.parse(E.value),null,2)}catch{return E.value}}),j=async n=>{try{const t=await xe(n.id);t.data&&t.data.rawData?(E.value=t.data.rawData,v.visible=!0):i==null||i.$modal.msgError("获取订单详情失败")}catch(t){console.error("Error fetching order details:",t),i==null||i.$modal.msgError("获取订单详情时发生错误")}},U=V({visible:!1,title:""}),F={},H=V({form:{...F},queryParams:{pageNum:1,pageSize:10,id:void 0,orderNo:void 0,email:void 0,params:{timestamp:void 0}},rules:{}}),{queryParams:r,form:J,rules:Le}=ue(H),g=async()=>{w.value=!0,r.value.params={},i==null||i.addDateRange(r.value,m.value,"Timestamp");const n=await qe(r.value);R.value=n.rows,y.value=n.total,w.value=!1},G=()=>{var n;J.value={...F},(n=A.value)==null||n.resetFields()},p=()=>{r.value.pageNum=1,g()},W=()=>{var n;m.value=["",""],(n=T.value)==null||n.resetFields(),p()},X=n=>{L.value=n.map(t=>t.id),Q.value=n.length!=1,z.value=!n.length},Z=()=>{G(),U.visible=!0,U.title="添加订单"};return ce(()=>{g()}),(n,t)=>{var q,x;const D=be,u=Re,ee=Ue,b=he,te=Te,P=Fe,ae=Pe,le=Ce,oe=Oe,d=Se,ne=we,re=ke,se=Ne,ie=ye,de=Ee,O=_e("hasPermi"),me=De;return h(),fe("div",Be,[e(ve,{"enter-active-class":(q=a(i))==null?void 0:q.animate.searchAnimate.enter,"leave-active-class":(x=a(i))==null?void 0:x.animate.searchAnimate.leave},{default:l(()=>[c(N("div",Ie,[e(P,{shadow:"hover"},{default:l(()=>[e(te,{ref_key:"queryFormRef",ref:T,model:a(r),inline:!0},{default:l(()=>[e(u,{label:"主键",prop:"id"},{default:l(()=>[e(D,{modelValue:a(r).id,"onUpdate:modelValue":t[0]||(t[0]=o=>a(r).id=o),placeholder:"请输入主键",clearable:"",onKeyup:S(p,["enter"])},null,8,["modelValue"])]),_:1}),e(u,{label:"订单编号",prop:"orderNo"},{default:l(()=>[e(D,{modelValue:a(r).orderNo,"onUpdate:modelValue":t[1]||(t[1]=o=>a(r).orderNo=o),placeholder:"请输入订单编号",clearable:"",onKeyup:S(p,["enter"])},null,8,["modelValue"])]),_:1}),e(u,{label:"订单创建时间",style:{width:"308px"}},{default:l(()=>[e(ee,{modelValue:a(m),"onUpdate:modelValue":t[2]||(t[2]=o=>B(m)?m.value=o:null),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":[new Date(2e3,1,1,0,0,0),new Date(2e3,1,1,23,59,59)]},null,8,["modelValue","default-time"])]),_:1}),e(u,{label:"客户邮箱",prop:"email"},{default:l(()=>[e(D,{modelValue:a(r).email,"onUpdate:modelValue":t[3]||(t[3]=o=>a(r).email=o),placeholder:"请输入客户邮箱",clearable:"",onKeyup:S(p,["enter"])},null,8,["modelValue"])]),_:1}),e(u,null,{default:l(()=>[e(b,{type:"primary",icon:"Search",onClick:p},{default:l(()=>t[8]||(t[8]=[k("搜索")])),_:1}),e(b,{icon:"Refresh",onClick:W},{default:l(()=>t[9]||(t[9]=[k("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})],512),[[I,a(f)]])]),_:1},8,["enter-active-class","leave-active-class"]),e(P,{shadow:"never"},{header:l(()=>[e(oe,{gutter:10,class:"mb8"},{default:l(()=>[e(ae,{span:1.5},{default:l(()=>[c((h(),C(b,{type:"primary",plain:"",icon:"Plus",onClick:Z},{default:l(()=>t[10]||(t[10]=[k("新增")])),_:1})),[[O,["vpadmin:orders:add"]]])]),_:1}),e(le,{showSearch:a(f),"onUpdate:showSearch":t[4]||(t[4]=o=>B(f)?f.value=o:null),onQueryTable:g},null,8,["showSearch"])]),_:1})]),default:l(()=>[c((h(),C(re,{data:a(R),onSelectionChange:X},{default:l(()=>[e(d,{type:"selection",width:"55",align:"center"}),(h(),C(d,{key:0,label:"主键",align:"center",prop:"id"})),e(d,{label:"订单编号",align:"center",prop:"orderNo"}),e(d,{label:"订单创建时间",align:"center",prop:"timestamp",width:"180"},{default:l(o=>[N("span",null,Y(n.parseTime(o.row.timestamp)),1)]),_:1}),e(d,{label:"订单附加消息",align:"center",prop:"message"}),e(d,{label:"订单金额",align:"center",prop:"amount"}),e(d,{label:"客户邮箱",align:"center",prop:"email"}),e(d,{label:"货币类型",align:"center",prop:"currency"}),e(d,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:l(o=>[e(ne,{content:"详情",placement:"top"},{default:l(()=>[c(e(b,{link:"",type:"primary",icon:"Document",onClick:Qe=>j(o.row)},null,8,["onClick"]),[[O,["vpadmin:orders:query"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[me,a(w)]]),c(e(se,{page:a(r).pageNum,"onUpdate:page":t[5]||(t[5]=o=>a(r).pageNum=o),limit:a(r).pageSize,"onUpdate:limit":t[6]||(t[6]=o=>a(r).pageSize=o),total:a(y),onPagination:g},null,8,["page","limit","total"]),[[I,a(y)>0]])]),_:1}),e(de,{modelValue:a(v).visible,"onUpdate:modelValue":t[7]||(t[7]=o=>a(v).visible=o),title:a(v).title,width:"50%"},{default:l(()=>[e(ie,{height:"400px"},{default:l(()=>[N("pre",Ye,Y(a(M)),1)]),_:1})]),_:1},8,["modelValue","title"])])}}}),it=Ve(Ke,[["__scopeId","data-v-c9b37809"]]);export{it as default};
