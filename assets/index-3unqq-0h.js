import{d as O,$ as A,r as d,a0 as Q,b as fe,a1 as ce,o as u,c as j,j as e,k as l,w as f,x as G,e as a,t as _e,y as c,Y as K,a2 as ge,m as _,Z as ve,F as be,p as we,R as ye,T as ke,G as Ve,I as Ee,a3 as he,W as Ce,v as Fe}from"./index-UXO82rnR.js";/* empty css                       *//* empty css                 *//* empty css                */import{_ as Me}from"./index-C2npmcbn.js";import{E as Ne,a as Te}from"./el-table-column-MKEZIRY_.js";import"./el-checkbox-DqrEs51o.js";import{_ as Se}from"./index-Cjgvf-op.js";/* empty css               */import{_ as De}from"./index-N3xDeOIY.js";/* empty css               */import{E as Re,a as Ue}from"./el-form-item-DKWg1Omz.js";import{l as $e,g as qe,u as Pe,a as xe,d as Be}from"./index-BBwkdTg_.js";import{E as Le}from"./index-BwbVV6-O.js";import{E as Ie}from"./index-ennNA2X2.js";import{E as ze}from"./index-BTmQHi_c.js";import{E as Ae,a as Qe}from"./index-Cmm1733V.js";import"./_initCloneObject-Dmlh6vfv.js";/* empty css                */import"./index-613SZYvd.js";import"./_baseClone-CaGvglyq.js";const je={class:"p-2"},Ge={class:"search"},Ke={class:"dialog-footer"},Oe=O({name:"FormManage"}),ga=O({...Oe,setup(We){const{proxy:s}=ke(),{wf_form_type:S}=A(s==null?void 0:s.useDict("wf_form_type")),D=d([]),k=d(!1),V=d(!0),E=d(!0),C=d([]),R=d(!0),U=d(!0),F=d(0),$=d(),M=d(),p=Q({visible:!1,title:""}),q={id:void 0,formName:void 0,formType:"static",remark:void 0},W=Q({form:{...q},queryParams:{pageNum:1,pageSize:10,formName:void 0,formType:void 0},rules:{id:[{required:!0,message:"主键不能为空",trigger:"blur"}],formName:[{required:!0,message:"表单名称不能为空",trigger:"blur"}],formType:[{required:!0,message:"表单类型不能为空",trigger:"change"}],router:[{required:!0,message:"不能为空",trigger:"blur"}]}}),{queryParams:m,form:r,rules:Y}=A(W),b=async()=>{V.value=!0;const n=await $e(m.value);D.value=n.rows,F.value=n.total,V.value=!1},Z=()=>{N(),p.visible=!1},N=()=>{var n;r.value={...q},(n=M.value)==null||n.resetFields()},T=()=>{m.value.pageNum=1,b()},H=()=>{var n;(n=$.value)==null||n.resetFields(),T()},J=n=>{C.value=n.map(o=>o.id),R.value=n.length!=1,U.value=!n.length},X=()=>{N(),p.visible=!0,p.title="添加表单管理"},P=async n=>{N();const o=(n==null?void 0:n.id)||C.value[0],g=await qe(o);Object.assign(r.value,g.data),p.visible=!0,p.title="修改表单管理"},ee=()=>{var n;(n=M.value)==null||n.validate(async o=>{o&&(k.value=!0,r.value.id?await Pe(r.value).finally(()=>k.value=!1):await xe(r.value).finally(()=>k.value=!1),s==null||s.$modal.msgSuccess("操作成功"),p.visible=!1,await b())})},x=async n=>{const o=(n==null?void 0:n.id)||C.value;await(s==null?void 0:s.$modal.confirm('是否确认删除表单管理编号为"'+o+'"的数据项？').finally(()=>V.value=!1)),await Be(o),s==null||s.$modal.msgSuccess("删除成功"),await b()},ae=()=>{s==null||s.download("workflow/formManage/export",{...m.value},`formManage_${new Date().getTime()}.xlsx`)};return fe(()=>{b()}),(n,o)=>{var I,z;const g=Ve,v=Re,i=Ee,B=Ue,h=Le,oe=De,le=Ie,w=Ne,te=Se,L=he,ne=Te,re=Me,se=ze,ie=Ae,me=Qe,de=Ce,y=ce("hasPermi"),ue=Fe;return u(),j("div",je,[e(ge,{"enter-active-class":(I=a(s))==null?void 0:I.animate.searchAnimate.enter,"leave-active-class":(z=a(s))==null?void 0:z.animate.searchAnimate.leave},{default:l(()=>[f(G("div",Ge,[e(B,{ref_key:"queryFormRef",ref:$,model:a(m),inline:!0},{default:l(()=>[e(v,{label:"表单名称",prop:"formName"},{default:l(()=>[e(g,{modelValue:a(m).formName,"onUpdate:modelValue":o[0]||(o[0]=t=>a(m).formName=t),placeholder:"请输入表单名称",clearable:"",onKeyup:_e(T,["enter"])},null,8,["modelValue"])]),_:1}),e(v,null,{default:l(()=>[e(i,{type:"primary",icon:"Search",onClick:T},{default:l(()=>[c("搜索")]),_:1}),e(i,{icon:"Refresh",onClick:H},{default:l(()=>[c("重置")]),_:1})]),_:1})]),_:1},8,["model"])],512),[[K,a(E)]])]),_:1},8,["enter-active-class","leave-active-class"]),e(se,{shadow:"never"},{header:l(()=>[e(le,{gutter:10,class:"mb8"},{default:l(()=>[e(h,{span:1.5},{default:l(()=>[f((u(),_(i,{type:"primary",plain:"",icon:"Plus",onClick:X},{default:l(()=>[c("新增")]),_:1})),[[y,["workflow:formManage:add"]]])]),_:1}),e(h,{span:1.5},{default:l(()=>[f((u(),_(i,{type:"success",plain:"",icon:"Edit",disabled:a(R),onClick:o[1]||(o[1]=t=>P())},{default:l(()=>[c("修改")]),_:1},8,["disabled"])),[[y,["workflow:formManage:edit"]]])]),_:1}),e(h,{span:1.5},{default:l(()=>[f((u(),_(i,{type:"danger",plain:"",icon:"Delete",disabled:a(U),onClick:o[2]||(o[2]=t=>x())},{default:l(()=>[c("删除")]),_:1},8,["disabled"])),[[y,["workflow:formManage:remove"]]])]),_:1}),e(h,{span:1.5},{default:l(()=>[f((u(),_(i,{type:"warning",plain:"",icon:"Download",onClick:ae},{default:l(()=>[c("导出")]),_:1})),[[y,["workflow:formManage:export"]]])]),_:1}),e(oe,{showSearch:a(E),"onUpdate:showSearch":o[3]||(o[3]=t=>ve(E)?E.value=t:null),onQueryTable:b},null,8,["showSearch"])]),_:1})]),default:l(()=>[f((u(),_(ne,{data:a(D),onSelectionChange:J},{default:l(()=>[e(w,{type:"selection",width:"55",align:"center"}),e(w,{label:"表单名称",align:"center",prop:"formName"}),e(w,{label:"表单类型",align:"center"},{default:l(t=>[e(te,{options:a(S),value:t.row.formType},null,8,["options","value"])]),_:1}),e(w,{label:"地址",align:"center",prop:"router"}),e(w,{label:"备注",align:"center",prop:"remark"}),e(w,{label:"操作",align:"center","class-name":"small-padding fixed-width"},{default:l(t=>[e(L,{content:"修改",placement:"top"},{default:l(()=>[f(e(i,{link:"",type:"primary",icon:"Edit",onClick:pe=>P(t.row)},null,8,["onClick"]),[[y,["workflow:formManage:edit"]]])]),_:2},1024),e(L,{content:"删除",placement:"top"},{default:l(()=>[f(e(i,{link:"",type:"primary",icon:"Delete",onClick:pe=>x(t.row)},null,8,["onClick"]),[[y,["workflow:formManage:remove"]]])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[ue,a(V)]]),f(e(re,{page:a(m).pageNum,"onUpdate:page":o[4]||(o[4]=t=>a(m).pageNum=t),limit:a(m).pageSize,"onUpdate:limit":o[5]||(o[5]=t=>a(m).pageSize=t),total:a(F),onPagination:b},null,8,["page","limit","total"]),[[K,a(F)>0]])]),_:1}),e(de,{modelValue:a(p).visible,"onUpdate:modelValue":o[12]||(o[12]=t=>a(p).visible=t),title:a(p).title,width:"500px","append-to-body":""},{footer:l(()=>[G("div",Ke,[e(i,{loading:a(k),type:"primary",onClick:ee},{default:l(()=>[c("确 定")]),_:1},8,["loading"]),e(i,{onClick:Z},{default:l(()=>[c("取 消")]),_:1})])]),default:l(()=>[e(B,{ref_key:"formManageFormRef",ref:M,model:a(r),rules:a(Y),"label-width":"80px"},{default:l(()=>[e(v,{label:"表单名称",prop:"formName"},{default:l(()=>[e(g,{modelValue:a(r).formName,"onUpdate:modelValue":o[6]||(o[6]=t=>a(r).formName=t),placeholder:"请输入表单名称"},null,8,["modelValue"])]),_:1}),e(v,{label:"表单类型",prop:"formType"},{default:l(()=>[e(me,{modelValue:a(r).formType,"onUpdate:modelValue":o[7]||(o[7]=t=>a(r).formType=t),onChange:o[8]||(o[8]=t=>a(r).router="")},{default:l(()=>[(u(!0),j(be,null,we(a(S),t=>(u(),_(ie,{key:t.value,border:"",value:t.value},{default:l(()=>[c(ye(t.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(r).formType==="static"?(u(),_(v,{key:0,label:"路由地址",prop:"router"},{default:l(()=>[e(g,{modelValue:a(r).router,"onUpdate:modelValue":o[9]||(o[9]=t=>a(r).router=t),placeholder:"请输入路由地址"},null,8,["modelValue"])]),_:1})):(u(),_(v,{key:1,label:"表单",prop:"router"},{default:l(()=>[e(g,{modelValue:a(r).router,"onUpdate:modelValue":o[10]||(o[10]=t=>a(r).router=t),disabled:"",placeholder:"请选择表单"},{append:l(()=>[e(i,{icon:"Search"})]),_:1},8,["modelValue"])]),_:1})),e(v,{label:"备注",prop:"remark"},{default:l(()=>[e(g,{modelValue:a(r).remark,"onUpdate:modelValue":o[11]||(o[11]=t=>a(r).remark=t),type:"textarea",placeholder:"请输入内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});export{ga as default};
