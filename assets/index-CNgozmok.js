import{ac as s,d as g,r as v,b as f,E as n,o as h,c as E,j as a,k as l,y as S,ad as b,I as w}from"./index-_v2uieGc.js";import{E as y,a as x}from"./el-form-item-BZcdB44L.js";import"./_baseClone-Cj6s47u0.js";import"./_initCloneObject-DMl0_0C4.js";const C=()=>s({url:"/vpadmin/globalSettings",method:"get"}),V=o=>s({url:"/vpadmin/globalSettings",method:"post",data:o}),k=o=>s({url:"/vpadmin/globalSettings",method:"put",data:o}),F={class:"p-2"},M=g({__name:"index",setup(o){const t=v({autoSendEmail:"0"});f(async()=>{try{const e=await C();e.data&&(t.value=e.data)}catch(e){console.error("Failed to fetch global settings:",e),n.error("获取全局设置失败")}});const c=e=>{console.log("Auto send email changed to:",e)},d=async()=>{try{t.value.id?await k(t.value):await V({...t.value}),n.success("设置保存成功")}catch(e){console.error("Failed to save settings:",e),n.error("设置保存失败")}};return(e,r)=>{const u=b,i=y,m=w,p=x;return h(),E("div",F,[a(p,{model:t.value,"label-width":"120px"},{default:l(()=>[a(i,{label:"自动发送邮件"},{default:l(()=>[a(u,{modelValue:t.value.autoSendEmail,"onUpdate:modelValue":r[0]||(r[0]=_=>t.value.autoSendEmail=_),"active-value":"1","inactive-value":"0",onChange:c},null,8,["modelValue"])]),_:1}),a(i,null,{default:l(()=>[a(m,{type:"primary",onClick:d},{default:l(()=>[S("保存设置")]),_:1})]),_:1})]),_:1},8,["model"])])}}});export{M as default};
