import{d as C,$ as A,r as m,a0 as G,o as N,m as I,k as t,j as e,e as a,Z as W,x as S,y as c,t as V,R as Z,q as H,T as J,G as M,I as O,W as X}from"./index-_v2uieGc.js";/* empty css               */import{_ as Y}from"./index-B7XPQ3lw.js";import{E as ee,a as oe}from"./el-table-column-Q2QHI77F.js";import"./el-checkbox-C6h3hzMD.js";import{_ as te}from"./index-DXIR9_gV.js";import{E as le,a as ae}from"./el-form-item-BZcdB44L.js";import{j as ne,k as se}from"./index-CdrecNFV.js";import{E as re}from"./index-DJNwvRpE.js";const ue={class:"dialog-footer"},ie=C({name:"SelectUser"}),we=C({...ie,props:{roleId:{type:[Number,String],required:!0}},emits:["ok"],setup(E,{expose:R,emit:U}){const T=E,{proxy:r}=J(),{sys_normal_disable:q}=A(r==null?void 0:r.useDict("sys_normal_disable")),b=m([]),i=m(!1),_=m(0),v=m([]),n=G({pageNum:1,pageSize:10,roleId:void 0,userName:void 0,phonenumber:void 0}),w=m(),y=m(),F=()=>{n.roleId=T.roleId,p(),i.value=!0},B=s=>{var o;(o=w.value)==null||o.toggleRowSelection(s,!1)},$=s=>{v.value=s.map(o=>o.userId)},p=async()=>{const s=await ne(n);b.value=s.rows,_.value=s.total},f=()=>{n.pageNum=1,p()},j=()=>{var s;(s=y.value)==null||s.resetFields(),p()},z=U,D=async()=>{const s=n.roleId,o=v.value.join(",");if(o==""){r==null||r.$modal.msgError("请选择要分配的用户");return}await se({roleId:s,userIds:o}),r==null||r.$modal.msgSuccess("分配成功"),z("ok"),i.value=!1};return R({show:F}),(s,o)=>{const h=M,g=le,d=O,K=ae,u=ee,L=te,x=oe,P=Y,k=re,Q=X;return N(),I(k,null,{default:t(()=>[e(Q,{modelValue:a(i),"onUpdate:modelValue":o[5]||(o[5]=l=>W(i)?i.value=l:null),title:"选择用户",width:"800px",top:"5vh","append-to-body":""},{footer:t(()=>[S("div",ue,[e(d,{type:"primary",onClick:D},{default:t(()=>[c("确 定")]),_:1}),e(d,{onClick:o[4]||(o[4]=l=>i.value=!1)},{default:t(()=>[c("取 消")]),_:1})])]),default:t(()=>[e(K,{ref_key:"queryFormRef",ref:y,model:a(n),inline:!0},{default:t(()=>[e(g,{label:"用户名称",prop:"userName"},{default:t(()=>[e(h,{modelValue:a(n).userName,"onUpdate:modelValue":o[0]||(o[0]=l=>a(n).userName=l),placeholder:"请输入用户名称",clearable:"",onKeyup:V(f,["enter"])},null,8,["modelValue"])]),_:1}),e(g,{label:"手机号码",prop:"phonenumber"},{default:t(()=>[e(h,{modelValue:a(n).phonenumber,"onUpdate:modelValue":o[1]||(o[1]=l=>a(n).phonenumber=l),placeholder:"请输入手机号码",clearable:"",onKeyup:V(f,["enter"])},null,8,["modelValue"])]),_:1}),e(g,null,{default:t(()=>[e(d,{type:"primary",icon:"Search",onClick:f},{default:t(()=>[c("搜索")]),_:1}),e(d,{icon:"Refresh",onClick:j},{default:t(()=>[c("重置")]),_:1})]),_:1})]),_:1},8,["model"]),e(k,null,{default:t(()=>[e(x,{ref_key:"tableRef",ref:w,data:a(b),height:"260px",onRowClick:B,onSelectionChange:$},{default:t(()=>[e(u,{type:"selection",width:"55"}),e(u,{label:"用户名称",prop:"userName","show-overflow-tooltip":!0}),e(u,{label:"用户昵称",prop:"nickName","show-overflow-tooltip":!0}),e(u,{label:"邮箱",prop:"email","show-overflow-tooltip":!0}),e(u,{label:"手机",prop:"phonenumber","show-overflow-tooltip":!0}),e(u,{label:"状态",align:"center",prop:"status"},{default:t(l=>[e(L,{options:a(q),value:l.row.status},null,8,["options","value"])]),_:1}),e(u,{label:"创建时间",align:"center",prop:"createTime",width:"180"},{default:t(l=>[S("span",null,Z(s.parseTime(l.row.createTime)),1)]),_:1})]),_:1},8,["data"]),a(_)>0?(N(),I(P,{key:0,page:a(n).pageNum,"onUpdate:page":o[2]||(o[2]=l=>a(n).pageNum=l),limit:a(n).pageSize,"onUpdate:limit":o[3]||(o[3]=l=>a(n).pageSize=l),total:a(_),onPagination:p},null,8,["page","limit","total"])):H("",!0)]),_:1})]),_:1},8,["modelValue"])]),_:1})}}});export{we as _};
