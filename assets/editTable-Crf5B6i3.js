import{d as F,u as q,r as p,o as g,p as N,k as t,j as e,e as f,X as R,c as G,F as S,q as O,m as E,Q as k,y as x,G as Q,C as H,D as K,I as M,R as W}from"./index-D4nD6lq3.js";/* empty css                */import{a as z}from"./el-form-item-oceQVxPu.js";import{E as J,a as X}from"./el-tab-pane-xdTQeNFk.js";import{E as A,a as Y}from"./el-table-column-Nw9CsZCh.js";import{E as Z}from"./el-checkbox-DpS0yAA0.js";import{g as ee,u as le}from"./index-C4Nts5I9.js";import{o as ae}from"./index-w6FYb8bd.js";import{_ as oe}from"./basicInfoForm.vue_vue_type_script_setup_true_lang-DSrcRyMQ.js";import{_ as te}from"./genInfoForm.vue_vue_type_script_setup_true_lang-Bs9PTwx8.js";import{E as ne}from"./index-DWSlLEJi.js";import"./_baseClone-zQQn4kcl.js";import"./_initCloneObject-Cyh6om-O.js";/* empty css               *//* empty css               */import"./index-I5OlcPyW.js";import"./index-fvT2sidt.js";/* empty css                 *//* empty css                */import"./el-tree-select-DpW7sF-R.js";import"./index-CsUbaV0a.js";import"./index-CqZODYBy.js";import"./index-BaDxqmMz.js";const ue={style:{float:"left"}},me={style:{float:"right",color:"#8492a6","font-size":"13px"}},de={style:{"text-align":"center","margin-left":"-100px","margin-top":"10px"}},re=F({name:"GenEdit"}),Le=F({...re,setup(ie){const v=q(),{proxy:r}=W(),V=p("columnInfo"),B=p(document.documentElement.scrollHeight-245+"px"),h=p([]),w=p([]),y=p([]),s=p({}),T=p(),U=p(),D=()=>{var d,u;const i=(d=T.value)==null?void 0:d.$refs.basicInfoForm,n=(u=U.value)==null?void 0:u.$refs.genInfoForm;Promise.all([i,n].map(L)).then(async b=>{var c;if(b.every(m=>!!m)){const m=Object.assign({},s.value);m.columns=w.value,m.params={treeCode:(c=s.value)==null?void 0:c.treeCode,treeName:s.value.treeName,treeParentCode:s.value.treeParentCode,parentMenuId:s.value.parentMenuId};const _=await le(m);r==null||r.$modal.msgSuccess(_.msg),_.code===200&&I()}else r==null||r.$modal.msgError("表单校验未通过，请重新检查提交内容")})},L=i=>new Promise(n=>{i.validate(d=>{n(d)})}),I=()=>{const i={path:"/tool/gen",fullPath:"",hash:"",matched:[],meta:void 0,name:void 0,params:void 0,redirectedFrom:void 0,query:{t:Date.now().toString(),pageNum:v.query.pageNum}};r==null||r.$tab.closeOpenPage(i)};return(async()=>{const i=v.params&&v.params.tableId;if(i){const n=await ee(i);w.value=n.data.rows,s.value=n.data.info,h.value=n.data.tables;const d=await ae();y.value=d.data}})(),(i,n)=>{const d=J,u=A,b=Q,o=H,c=K,m=Z,_=Y,$=X,C=M,j=z,P=ne;return g(),N(P,null,{default:t(()=>[e($,{modelValue:f(V),"onUpdate:modelValue":n[0]||(n[0]=l=>R(V)?V.value=l:null)},{default:t(()=>[e(d,{label:"基本信息",name:"basic"},{default:t(()=>[e(oe,{ref_key:"basicInfo",ref:T,info:f(s)},null,8,["info"])]),_:1}),e(d,{label:"字段信息",name:"columnInfo"},{default:t(()=>[e(_,{ref:"dragTable",data:f(w),"row-key":"columnId","max-height":f(B)},{default:t(()=>[e(u,{label:"序号",type:"index","min-width":"5%"}),e(u,{label:"字段列名",prop:"columnName","min-width":"10%","show-overflow-tooltip":!0}),e(u,{label:"字段描述","min-width":"10%"},{default:t(l=>[e(b,{modelValue:l.row.columnComment,"onUpdate:modelValue":a=>l.row.columnComment=a},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(u,{label:"物理类型",prop:"columnType","min-width":"10%","show-overflow-tooltip":!0}),e(u,{label:"Java类型","min-width":"11%"},{default:t(l=>[e(c,{modelValue:l.row.javaType,"onUpdate:modelValue":a=>l.row.javaType=a},{default:t(()=>[e(o,{label:"Long",value:"Long"}),e(o,{label:"String",value:"String"}),e(o,{label:"Integer",value:"Integer"}),e(o,{label:"Double",value:"Double"}),e(o,{label:"BigDecimal",value:"BigDecimal"}),e(o,{label:"Date",value:"Date"}),e(o,{label:"Boolean",value:"Boolean"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(u,{label:"java属性","min-width":"10%"},{default:t(l=>[e(b,{modelValue:l.row.javaField,"onUpdate:modelValue":a=>l.row.javaField=a},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(u,{label:"插入","min-width":"5%"},{default:t(l=>[e(m,{modelValue:l.row.isInsert,"onUpdate:modelValue":a=>l.row.isInsert=a,"true-value":"1","false-value":"0"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(u,{label:"编辑","min-width":"5%"},{default:t(l=>[e(m,{modelValue:l.row.isEdit,"onUpdate:modelValue":a=>l.row.isEdit=a,"true-value":"1","false-value":"0"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(u,{label:"列表","min-width":"5%"},{default:t(l=>[e(m,{modelValue:l.row.isList,"onUpdate:modelValue":a=>l.row.isList=a,"true-value":"1","false-value":"0"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(u,{label:"查询","min-width":"5%"},{default:t(l=>[e(m,{modelValue:l.row.isQuery,"onUpdate:modelValue":a=>l.row.isQuery=a,"true-value":"1","false-value":"0"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(u,{label:"查询方式","min-width":"10%"},{default:t(l=>[e(c,{modelValue:l.row.queryType,"onUpdate:modelValue":a=>l.row.queryType=a},{default:t(()=>[e(o,{label:"=",value:"EQ"}),e(o,{label:"!=",value:"NE"}),e(o,{label:">",value:"GT"}),e(o,{label:">=",value:"GE"}),e(o,{label:"<",value:"LT"}),e(o,{label:"<=",value:"LE"}),e(o,{label:"LIKE",value:"LIKE"}),e(o,{label:"BETWEEN",value:"BETWEEN"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(u,{label:"必填","min-width":"5%"},{default:t(l=>[e(m,{modelValue:l.row.isRequired,"onUpdate:modelValue":a=>l.row.isRequired=a,"true-value":"1","false-value":"0"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(u,{label:"显示类型","min-width":"12%"},{default:t(l=>[e(c,{modelValue:l.row.htmlType,"onUpdate:modelValue":a=>l.row.htmlType=a},{default:t(()=>[e(o,{label:"文本框",value:"input"}),e(o,{label:"文本域",value:"textarea"}),e(o,{label:"下拉框",value:"select"}),e(o,{label:"单选框",value:"radio"}),e(o,{label:"复选框",value:"checkbox"}),e(o,{label:"日期控件",value:"datetime"}),e(o,{label:"图片上传",value:"imageUpload"}),e(o,{label:"文件上传",value:"fileUpload"}),e(o,{label:"富文本控件",value:"editor"})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(u,{label:"字典类型","min-width":"12%"},{default:t(l=>[e(c,{modelValue:l.row.dictType,"onUpdate:modelValue":a=>l.row.dictType=a,clearable:"",filterable:"",placeholder:"请选择"},{default:t(()=>[(g(!0),G(S,null,O(f(y),a=>(g(),N(o,{key:a.dictType,label:a.dictName,value:a.dictType},{default:t(()=>[E("span",ue,k(a.dictName),1),E("span",me,k(a.dictType),1)]),_:2},1032,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data","max-height"])]),_:1}),e(d,{label:"生成信息",name:"genInfo"},{default:t(()=>[e(te,{ref_key:"genInfo",ref:U,info:f(s),tables:f(h)},null,8,["info","tables"])]),_:1})]),_:1},8,["modelValue"]),e(j,{"label-width":"100px"},{default:t(()=>[E("div",de,[e(C,{type:"primary",onClick:n[1]||(n[1]=l=>D())},{default:t(()=>n[3]||(n[3]=[x("提交")])),_:1}),e(C,{onClick:n[2]||(n[2]=l=>I())},{default:t(()=>n[4]||(n[4]=[x("返回")])),_:1})])]),_:1})]),_:1})}}});export{Le as default};
