import{i as C}from"./index-QK8Dm0L8.js";import{d as F,r as c,Q as N,U as T,b as P,n as $,V as q,o as A,c as V,x as i,j as r,k as s,F as K,p as Q,m as W,e as a,R as L,I as D,y as k,W as Y,a as H,N as J}from"./index-BdO_PCud.js";import{E as h}from"./index-Da5mA8cC.js";import{E as d}from"./index-ChncSV8R.js";import{E as g}from"./index-BPUStiGI.js";const X={totalUsers:1234,totalOrders:5678,monthlyRevenue:98765.43,averageOrderAmount:123.45,userGrowth:{dates:Array.from({length:30},(v,n)=>{const e=new Date;return e.setDate(e.getDate()-n),e.toISOString().split("T")[0]}).reverse(),values:Array.from({length:30},(v,n)=>Math.floor(1e3+n*10+Math.random()*50))},orderTrend:{dates:Array.from({length:30},(v,n)=>{const e=new Date;return e.setDate(e.getDate()-n),e.toISOString().split("T")[0]}).reverse(),values:Array.from({length:30},()=>Math.floor(Math.random()*100+50))},revenueTrend:{dates:Array.from({length:30},(v,n)=>{const e=new Date;return e.setDate(e.getDate()-n),e.toISOString().split("T")[0]}).reverse(),values:Array.from({length:30},()=>Math.random()*1e4+5e3)}};function Z(v){return new Promise(n=>{setTimeout(()=>{n({data:X,status:200,statusText:"OK",headers:{},config:{}})},500)})}const ee="/manage/assets/analytics-dashboard-D07O37Y9.png",te={class:"dashboard"},ae={class:"dashboard-content"},se={class:"card-header"},re={class:"card-content"},le=["src"],oe=F({__name:"index",setup(v){const n=H(),e=c({loading:!0,statistics:{}}),y=c(!1),_=c(!1),M=N(()=>{var t,l;return[{title:"总用户数",value:e.value.statistics.totalUsers||0},{title:"总订单数",value:e.value.statistics.totalOrders||0},{title:"本月收入",value:`¥${((t=e.value.statistics.monthlyRevenue)==null?void 0:t.toFixed(2))||"0.00"}`},{title:"平均订单金额",value:`¥${((l=e.value.statistics.averageOrderAmount)==null?void 0:l.toFixed(2))||"0.00"}`}]}),x=c(null),w=c(null),b=c(null),f=T(null),m=T(null),p=T(null),z=()=>{x.value&&!f.value&&(f.value=C(x.value)),w.value&&!m.value&&(m.value=C(w.value)),b.value&&!p.value&&(p.value=C(b.value))},B=()=>{var t,l,o,u,G,S;return{userGrowth:{title:{text:"用户增长趋势"},xAxis:{type:"category",data:(t=e.value.statistics.userGrowth)==null?void 0:t.dates},yAxis:{type:"value"},series:[{data:(l=e.value.statistics.userGrowth)==null?void 0:l.values,type:"line"}],grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},tooltip:{trigger:"axis"},responsive:!0,maintainAspectRatio:!1},orderTrend:{title:{text:"订单趋势"},xAxis:{type:"category",data:(o=e.value.statistics.orderTrend)==null?void 0:o.dates},yAxis:{type:"value"},series:[{data:(u=e.value.statistics.orderTrend)==null?void 0:u.values,type:"bar"}],grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},tooltip:{trigger:"axis"},responsive:!0,maintainAspectRatio:!1},revenueTrend:{title:{text:"收入趋势"},xAxis:{type:"category",data:(G=e.value.statistics.revenueTrend)==null?void 0:G.dates},yAxis:{type:"value"},series:[{data:(S=e.value.statistics.revenueTrend)==null?void 0:S.values,type:"line"}],grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},tooltip:{trigger:"axis"},responsive:!0,maintainAspectRatio:!1}}},R=()=>{var l,o,u;const t=B();(l=f.value)==null||l.setOption(t.userGrowth),(o=m.value)==null||o.setOption(t.orderTrend),(u=p.value)==null||u.setOption(t.revenueTrend)},O=()=>{var t,l,o;(t=f.value)==null||t.resize(),(l=m.value)==null||l.resize(),(o=p.value)==null||o.resize()},E=async()=>{try{e.value.loading=!0;const{data:t}=await Z();e.value.statistics=t}catch(t){console.error("Failed to fetch dashboard data:",t)}finally{e.value.loading=!1}},I=async()=>{y.value=!0;try{await E(),R()}finally{y.value=!1}},U=()=>{_.value=!0},j=()=>{n.push("/vpadmin/project/project")};return P(async()=>{await E(),await $(),z(),R(),window.addEventListener("resize",O)}),q(()=>{var t,l,o;window.removeEventListener("resize",O),(t=f.value)==null||t.dispose(),(l=m.value)==null||l.dispose(),(o=p.value)==null||o.dispose()}),(t,l)=>(A(),V("div",te,[i("div",ae,[r(a(g),{gutter:20},{default:s(()=>[(A(!0),V(K,null,Q(M.value,(o,u)=>(A(),W(a(d),{key:u,xs:24,sm:12,md:6},{default:s(()=>[r(a(h),{class:"box-card"},{default:s(()=>[i("div",se,[i("span",null,L(o.title),1)]),i("div",re,[i("h2",null,L(o.value),1)])]),_:2},1024)]),_:2},1024))),128))]),_:1}),r(a(g),{gutter:20,style:{"margin-top":"20px"}},{default:s(()=>[r(a(d),{xs:24,sm:24,md:12},{default:s(()=>[r(a(h),null,{default:s(()=>[i("div",{ref_key:"userGrowthChartRef",ref:x,class:"chart-container"},null,512)]),_:1})]),_:1}),r(a(d),{xs:24,sm:24,md:12},{default:s(()=>[r(a(h),null,{default:s(()=>[i("div",{ref_key:"orderTrendChartRef",ref:w,class:"chart-container"},null,512)]),_:1})]),_:1})]),_:1}),r(a(g),{gutter:20,style:{"margin-top":"20px"}},{default:s(()=>[r(a(d),{span:24},{default:s(()=>[r(a(h),null,{default:s(()=>[i("div",{ref_key:"revenueChartRef",ref:b,class:"chart-container"},null,512)]),_:1})]),_:1})]),_:1}),r(a(g),{style:{"margin-top":"20px","justify-content":"center","align-items":"center"}},{default:s(()=>[r(a(d),{xs:24,sm:8,md:4,style:{"text-align":"center","margin-bottom":"10px"}},{default:s(()=>[r(a(D),{type:"primary",loading:y.value,onClick:I},{default:s(()=>[k(" 刷新数据 ")]),_:1},8,["loading"])]),_:1}),r(a(d),{xs:24,sm:8,md:4,style:{"text-align":"center","margin-bottom":"10px"}},{default:s(()=>[r(a(D),{link:"",onClick:U},{default:s(()=>[k("More analytics data preview")]),_:1})]),_:1}),r(a(d),{xs:24,sm:8,md:4,style:{"text-align":"center","margin-bottom":"10px"}},{default:s(()=>[r(a(D),{link:"",style:{color:"#f56c6c"},onClick:j},{default:s(()=>[k("Go to upgrade your site")]),_:1})]),_:1})]),_:1})]),r(a(Y),{modelValue:_.value,"onUpdate:modelValue":l[0]||(l[0]=o=>_.value=o),title:"Analytics Dashboard",width:"80%"},{default:s(()=>[i("img",{src:a(ee),style:{width:"100%"},alt:"Analytics Dashboard"},null,8,le)]),_:1},8,["modelValue"])]))}}),ve=J(oe,[["__scopeId","data-v-a75b25c1"]]);export{ve as default};
